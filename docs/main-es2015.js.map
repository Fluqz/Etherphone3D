{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/axes-behaviours/axes-behaviour.ts","./src/app/axes-behaviours/frequency-shfit.ts","./src/app/axes-behaviours/octivator.ts","./src/app/axes-behaviours/volume-shift.ts","./src/app/beatmachine/beat-machine.component.ts","./src/app/beatmachine/beat-machine.ts","./src/app/beatmachine/track.component.ts","./src/app/color.ts","./src/app/dashboard/dashboard.component.ts","./src/app/data/frequency-of-notes.ts","./src/app/object-control.ts","./src/app/scene-manager.ts","./src/app/selected-menu/selected.component.ts","./src/app/selected-menu/selected.component.html","./src/app/storage.ts","./src/app/theremin/axis.ts","./src/app/theremin/note.ts","./src/app/theremin/note3D.ts","./src/app/theremin/theremin.component.ts","./src/app/theremin/theremin.ts","./src/app/theremin/theremin3D.ts","./src/app/tools/drag-window.ts","./src/app/tools/labels/axes-label.ts","./src/app/tools/labels/distance-label.ts","./src/app/tools/labels/memory-label.ts","./src/app/tools/tools.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wE;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0F;AAE3C;AACY;AACR;AACF;AACA;AAEd;AACsB;;;;;;;;IAwB/C,0EAAoG;;;IAA3D,qFAAqB;;;IAE9D,+EAA4E;;;IAA1C,yFAAyB;;;IAE3D,6EAA4F;;;IAAxC,yFAAyB;;;IAOjF,2EAA8G;;;IAA5D,qFAAqB;;;;IA1BzE,yEAEE;IAFgC,0TAA6B;IAE7D,sEAEE;IAAA,yEAAoD;IAAnC,wSAAmB,aAAa,KAAE;IAAC,4DAAC;IAAA,4DAAM;IAE3D,yEAAqD;IAApC,wSAAmB,cAAc,KAAE;IAAC,4DAAC;IAAA,4DAAM;IAE9D,4DAAM;IAGN,yEAEI;IAAA,oEAA4B;IAE5B,wHAAyF;IAEzF,kIAA4D;IAE5D,gIAA8E;IAElF,4DAAM;IAKN,4HAAkG;IAEpG,4DAAM;;;IAbU,0DAA8B;IAA9B,sGAA8B;IAEzB,0DAAkB;IAAlB,mFAAkB;IAEpB,0DAAkB;IAAlB,mFAAkB;IAOxB,0DAAkB;IAAlB,mFAAkB;;AAO5B,MAAM,YAAY;IAsBvB,YAAmB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QAJxB,aAAQ,GAAY,KAAK;QAM9B,IAAI,CAAC,UAAU,GAAG,IAAI,6DAAU,EAAE;IACpC,CAAC;IAGD,eAAe;QAEb,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;QAEjD,IAAI,CAAC,EAAE,GAAG,IAAI,2DAAY,CAAC,IAAI,CAAC,SAAS,CAAC;QAE1C,MAAM,CAAC,UAAU,CAAC,GAAE,EAAE;YAEpB,IAAI,CAAC,QAAQ,GAAG,IAAI,2DAAQ,EAAE;YAE9B,IAAI,CAAC,WAAW,CAAC,gDAAO,CAAC,IAAI,EAAE,CAAC;YAEhC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC;YAEhC,IAAI,CAAC,UAAU,GAAG,IAAI,+DAAU,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC/C,IAAI,CAAC,OAAO,GAAG,IAAI,6DAAa,CAAC,IAAI,CAAC,UAAU,CAAC;YAGjD,mCAAmC;YAGnC,IAAI,CAAC,IAAI,EAAE;QACb,CAAC,CAAC;QAKF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QAC3C,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW;QAElC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;QACjD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC;QAElE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;QAC7C,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;QAE9D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;QAChD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC;QAGjE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;QAC7C,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC;QAE9D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;QACzC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;IAC5D,CAAC;IAGD,0CAA0C;IAC1C,oDAAoD;IACpD,kCAAkC;IAClC,2CAA2C;IAEpC,IAAI;QAET,iDAAiD;QAEjD,uBAAuB;QACvB,wDAAwD;QACxD,IAAI;QAEJ,IAAI,CAAC,MAAM,EAAE;QAEb,kDAAkD;QAClD,gCAAgC;QAEhC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAE,EAAE;YAC9B,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChE,CAAC,CAAC;IACJ,CAAC;IAEO,MAAM;QACZ,wBAAwB;QAExB,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;QACtB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;QAExB,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE;IAClB,CAAC;IAEO,WAAW;QACjB,8BAA8B;IAChC,CAAC;IAGM,YAAY,CAAC,CAAC;QAEnB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;QAExC,IAAG,IAAI,IAAI,GAAG;YAAE,IAAI,GAAG,GAAG;aACrB,IAAG,IAAI,IAAI,GAAG;YAAE,IAAI,GAAG,GAAG;aAC1B,IAAG,IAAI,IAAI,GAAG;YAAE,IAAI,GAAG,GAAG;QAE/B,0BAA0B;QAE1B,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC;IACrC,CAAC;IAEM,SAAS,CAAC,IAAW;QAE1B,IAAG,IAAI,IAAI,cAAc,EAAE;YACzB,2DAAY,CAAC,YAAY,GAAG,yDAAU,CAAC,YAAY;YACnD,2DAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;SAChD;aACI,IAAG,IAAI,IAAI,aAAa;YAC3B,2DAAY,CAAC,YAAY,GAAG,yDAAU,CAAC,WAAW;QAEpD,2DAAY,CAAC,WAAW,GAAG,2DAAY,CAAC,aAAa;IACvD,CAAC;IAGM,YAAY;QAEjB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO;IACtC,CAAC;IAEM,WAAW,CAAC,CAAC;QAElB,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;IAEhC,CAAC;IAEM,WAAW,CAAC,CAAC;QAElB,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;IAChC,CAAC;IAEM,SAAS,CAAC,CAAC;QAEhB,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;IAC9B,CAAC;IAGM,SAAS,CAAC,CAAC;IAGlB,CAAC;IAGM,OAAO,CAAC,CAAgB;QAE7B,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QACd,IAAG,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,OAAO,EAAE;YAEpC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;SAC5B;aACI,IAAG,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,MAAM,EAAE;YAExC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;SAC5B;IACH,CAAC;IAGM,QAAQ;QAEb,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE;IAClB,CAAC;IAIO,WAAW,CAAC,IAAY;QAE9B,IAAI,GAAG,GAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAE9B,IAAG,GAAG,CAAC,UAAU,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAE9D,IAAG,GAAG,CAAC,aAAa,CAAC,EAAE;YAErB,qEAAW,CAAC,GAAG,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC;YAC3C,qEAAW,CAAC,KAAK,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC;YAC/C,qEAAW,CAAC,YAAY,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,cAAc,CAAC;SAC9D;IACH,CAAC;IAEO,YAAY;QAElB,IAAI,OAAO,GAAS,EAAE;QAEtB,IAAI,GAAG,GAAO;YACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;YACtC,WAAW,EAAE;gBACX,GAAG,EAAE,qEAAW,CAAC,GAAG;gBACpB,KAAK,EAAE,qEAAW,CAAC,KAAK;gBACxB,YAAY,EAAE,qEAAW,CAAC,YAAY;aACvC;SACF;QAED,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;IAC5B,CAAC;IAKD,kBAAkB,CAAC,MAAW;QAE5B,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IAED,WAAW;QAET,MAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC;QAEtC,gDAAO,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;IACnC,CAAC;;wEAvOU,YAAY;4FAAZ,YAAY;wJAAZ,8BAA0B;;QApCnC,oEAAsB;QAGtB,yGAEE;;QAFG,0DAAY;QAAZ,sEAAY;;6FAiCR,YAAY;cAxCxB,uDAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAmCT;gBACD,SAAS,EAAE,CAAC,qBAAqB,CAAC;aACnC;;kBA6NE,0DAAY;mBAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;AC/QjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACjB;AACI;AACE;AAEc;AACJ;AACE;AACC;AACU;;AAmB/D,MAAM,SAAS;;wFAAT,SAAS,cAFR,2DAAY;4IAEb,SAAS,mBAHT,EAAE,YAJJ;YACP,uEAAa;YACb,0DAAW;SACZ;mIAIU,SAAS,mBAdlB,2DAAY;QACZ,0EAAQ;QACR,sEAAS;QACT,wEAAS;QACT,yEAAY;QACZ,mFAAe,aAGf,uEAAa;QACb,0DAAW;6FAKF,SAAS;cAhBrB,sDAAQ;eAAC;gBACR,YAAY,EAAE;oBACZ,2DAAY;oBACZ,0EAAQ;oBACR,sEAAS;oBACT,wEAAS;oBACT,yEAAY;oBACZ,mFAAe;iBAChB;gBACD,OAAO,EAAE;oBACP,uEAAa;oBACb,0DAAW;iBACZ;gBACD,SAAS,EAAE,EAAE;gBACb,SAAS,EAAE,CAAC,2DAAY,CAAC;aAC1B;;;;;;;;;;;;;;ACtBD;AAAA;AAAO,MAAM,aAAa;IAatB,YAAY,IAAW;QAXhB,SAAI,GAAW,EAAE;QAEjB,OAAE,GAAW,EAAE;QAIf,QAAG,GAAW,CAAC;QACf,QAAG,GAAW,IAAI;QAElB,UAAK,GAAY,KAAK;QAIzB,IAAI,CAAC,IAAI,GAAG,IAAI;IACpB,CAAC;IAEM,iBAAiB,CAAC,IAAU,IAAG,CAAC;IAEhC,qBAAqB,CAAC,IAAU,EAAE,QAAiB,IAAG,CAAC;CAEjE;;;;;;;;;;;;;AC3BD;AAAA;AAAA;AAAA;AAAgD;AAEoB;AAI7D,MAAM,cAAe,SAAQ,6DAAa;IAM7C,YAAY,IAAW;QAEnB,KAAK,CAAC,IAAI,CAAC;QANf,aAAQ,GAAe,EAAE;QAEzB,YAAO,GAAW,KAAK;QAMnB,IAAI,CAAC,IAAI,GAAG,iBAAiB;QAE7B,IAAI,CAAC,EAAE,GAAG,EAAE;QAEZ,IAAI,CAAC,GAAG,GAAG,CAAC;QACZ,IAAI,CAAC,GAAG,GAAG,IAAI;QAEf,IAAI,CAAC,KAAK,GAAG,KAAK;QAGlB,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7D,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7D,CAAC;IAEO,SAAS,CAAC,CAAgB;QAC9B,IAAG,CAAC,CAAC,GAAG,IAAI,GAAG;YAAE,IAAI,CAAC,OAAO,GAAG,IAAI;IACxC,CAAC;IACO,OAAO,CAAC,CAAgB;QAC5B,IAAG,CAAC,CAAC,GAAG,IAAI,GAAG;YAAE,IAAI,CAAC,OAAO,GAAG,KAAK;IACzC,CAAC;IAEM,UAAU,CAAC,SAAiB;QAE/B,IAAG,CAAC,IAAI,CAAC,OAAO;YAAE,OAAO,SAAS;QAElC,IAAI,OAAO,GAAW,IAAI;QAC1B,IAAI,WAAqB;QAEzB,sEAAa,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAE9B,IAAG,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;gBAE/C,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;gBAE9C,WAAW,GAAG,IAAI;aACrB;QACL,CAAC,CAAC;QAEF,OAAO,WAAW,CAAC,SAAS;IAChC,CAAC;IAOM,iBAAiB,CAAC,IAAU;QAE/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE;IACvD,CAAC;IAEM,qBAAqB,CAAC,IAAU,EAAE,QAAiB;QAEtD,IAAG,IAAI,CAAC,IAAI,IAAI,IAAI;YAAE,OAAM;QAC5B,IAAG,IAAI,CAAC,KAAK;YAAE,OAAM;QAErB,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG;QAEvE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;IAC/C,CAAC;CACJ;;;;;;;;;;;;;AC5ED;AAAA;AAAA;AAAA;AAAiD;AAGrB;AAGrB,MAAM,SAAU,SAAQ,6DAAa;IAMxC,YAAY,IAAW;QAEnB,KAAK,CAAC,IAAI,CAAC;QANP,SAAI,GAAqB,EAAE;QAQ/B,IAAI,CAAC,IAAI,GAAG,WAAW;QAEvB,IAAI,CAAC,EAAE,GAAG,EAAE;QAEZ,IAAI,CAAC,GAAG,GAAG,CAAC;QACZ,IAAI,CAAC,GAAG,GAAG,GAAG;QAEd,IAAI,CAAC,KAAK,GAAG,KAAK;IACtB,CAAC;IAIM,iBAAiB,CAAC,IAAU;IAEnC,CAAC;IAED,mCAAmC;IAC5B,qBAAqB,CAAC,IAAU,EAAE,QAAiB;QAGtD,IAAG,IAAI,CAAC,IAAI,IAAI,IAAI;YAAE,OAAM;QAC5B,IAAG,IAAI,CAAC,KAAK;YAAE,OAAM;QAErB,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QACjE,IAAI,SAAS,GAAU,KAAK,GAAE,CAAC;QAE/B,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;QAEvB,iDAAiD;QAEjD,IAAI,CAAC,iBAAiB,GAAG,SAAS;QAElC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YAEpB,GAAG,CAAC,IAAI,EAAE;YACV,GAAG,CAAC,UAAU,EAAE;QACpB,CAAC,CAAC;QACF,IAAI,CAAC,IAAI,GAAG,EAAE;QAEd,IAAI,GAAG,GAAY,KAAK;QACxB,IAAG,SAAS,GAAG,CAAC;YAAE,GAAG,GAAG,IAAI;QAE5B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,EAAE,EAAE;YAE5B,IAAI,GAAG,GAAG,4CAAY,CAAC,gBAAgB,EAAE;YACzC,uBAAuB;YACvB,oBAAoB;YACpB,2BAA2B;YAC3B,UAAU;YACV,2FAA2F;YAC3F,4FAA4F;YAE5F,GAAG,CAAC,KAAK,EAAE;YAEX,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;SACtB;IACL,CAAC;IAEO,YAAY,CAAC,SAAiB;IAItC,CAAC;CACJ;;;;;;;;;;;;;AC/ED;AAAA;AAAA;AAAA;AAAiD;AACT;AAIjC,MAAM,WAAY,SAAQ,6DAAa;IAE1C,YAAY,IAAW;QAEnB,KAAK,CAAC,IAAI,CAAC;QAEX,IAAI,CAAC,IAAI,GAAG,cAAc;QAE1B,IAAI,CAAC,EAAE,GAAG,GAAG;QAEb,IAAI,CAAC,GAAG,GAAG,CAAC;QACZ,IAAI,CAAC,GAAG,GAAG,GAAG;QAEd,IAAI,CAAC,KAAK,GAAG,KAAK;IACtB,CAAC;IAIM,iBAAiB,CAAC,IAAU;QAE/B,IAAG,IAAI,YAAY,mDAAI;YACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE;IACxD,CAAC;IAEM,qBAAqB,CAAC,IAAU,EAAE,QAAiB;QAEtD,IAAG,IAAI,CAAC,IAAI,IAAI,IAAI;YAAE,OAAM;QAC5B,IAAG,IAAI,CAAC,KAAK;YAAE,OAAM;QAErB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE;IAC/C,CAAC;CACJ;;;;;;;;;;;;;ACpCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiG;AAEpD;AAEC;;;;;;;;IAWxC,0EAAgE;IAAvB,2SAAgB;IAAC,4DAAM;;;;IAEhE,0EAAkE;IAAxB,4SAAiB;IAAC,4DAAM;;;IA2B5D,qEAAkG;;;;IAAxC,sGAAiC;;;IAI7F,2EACF;;;;IAD4C,yEAAa;;AAyE1D,MAAM,eAAe;IAS1B,YAAoB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QAJzB,aAAQ,GAAa,EAAE;IAM9B,CAAC;IAED,eAAe;IAEf,CAAC;IAKM,IAAI;QAET,4BAA4B;QAE5B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAExB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;QAClB,CAAC,CAAC;QACF,yDAAW,CAAC,IAAI,EAAE;QAGlB,qCAAqC;QAErC,sEAAsE;QACtE,KAAK;QAEL,yDAAW,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;IACjC,CAAC;IAEM,KAAK;QAER,yDAAW,CAAC,IAAI,EAAE;QAElB,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC;IACrC,CAAC;IAED,oDAAoD;IACpD,IAAI,OAAO;QAET,IAAG,CAAC,IAAI,CAAC,MAAM;YAAE,OAAM;QAEvB,IAAI,CAAC,QAAQ,GAAG,EAAE;QAElB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAExB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC;QACxC,CAAC,CAAC;QAEF,OAAO,IAAI,CAAC,QAAQ;IACtB,CAAC;IAED,IAAI,KAAK;QAEP,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO;IAChC,CAAC;IAEM,WAAW;QAEhB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,yDAAW,CAAC,IAAI,GAAG,CAAC,yDAAW,CAAC,cAAc,GAAG,yDAAW,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,yDAAW,CAAC,cAAc,GAAG,yDAAW,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG;QAC5I,OAAO,IAAI,CAAC,IAAI;IAClB,CAAC;IAED,8DAA8D;IAE9D,IAAW,GAAG,KAAK,OAAO,yDAAW,CAAC,GAAG,EAAC,CAAC;IAC3C,IAAW,GAAG,CAAC,GAAW;QAEtB,yDAAW,CAAC,GAAG,GAAG,GAAG;IACzB,CAAC;IAED,IAAW,KAAK,KAAK,OAAO,yDAAW,CAAC,KAAK,EAAC,CAAC;IAC/C,IAAW,KAAK,CAAC,KAAa,IAAI,yDAAW,CAAC,KAAK,GAAG,KAAK,EAAC,CAAC;IAE7D,IAAW,UAAU;QAEjB,IAAI,KAAK,GAAY,EAAE;QAEvB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,yDAAW,CAAC,KAAK,EAAE,CAAC,EAAE;YAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QAExD,OAAO,KAAK;IAChB,CAAC;IAED,IAAW,YAAY,KAAK,OAAO,yDAAW,CAAC,YAAY,EAAC,CAAC;IAC7D,IAAW,YAAY,CAAC,QAAe;QAErC,QAAO,QAAQ,EAAE;YACf,KAAK,GAAG,CAAC;YACT,KAAK,KAAK,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,MAAM,CAAC;YACZ,KAAK,MAAM,CAAC;YACZ,KAAK,MAAM;gBACP,yDAAW,CAAC,YAAY,GAAG,QAAQ;gBACrC,MAAK;SACR;IACH,CAAC;IAED,WAAW;QAET,IAAI,CAAC,KAAK,EAAE;IACd,CAAC;;8EA/GU,eAAe;+FAAf,eAAe;6EAGK,0DAAS;;;;;QA/GtC,yEAEE;QAAA,2GAA0D;QAE1D,2GAA4D;QAE5D,2EAEA;QAFmC,+KAAoC;QAAvE,4DAEA;QAAA,2EAEA;QAFqC,iLAAsC;QAA3E,4DAEA;QAAA,4EAEI;QAFwB,yLAA6C;QAErE,4EAAkB;QAAA,4DAAC;QAAA,4DAAS;QAC5B,4EAAoB;QAAA,8DAAG;QAAA,4DAAS;QAChC,6EAAoB;QAAA,+DAAG;QAAA,4DAAS;QAChC,6EAAoB;QAAA,+DAAG;QAAA,4DAAS;QAChC,6EAAqB;QAAA,gEAAI;QAAA,4DAAS;QAClC,8EAAqB;QAAA,gEAAI;QAAA,4DAAS;QAClC,8EAAqB;QAAA,gEAAI;QAAA,4DAAS;QAEtC,4DAAS;QAEX,4DAAM;QAIN,2EAEI;QAAA,sEAAuD;QAEvD,2EACI;QAAA,8GAA4F;QAChG,4DAAM;QAEN,2EACE;QAAA,kHACF;QAAA,4DAAM;QAEV,4DAAM;;QApCC,0DAAkB;QAAlB,gFAAkB;QAElB,0DAAkB;QAAlB,gFAAkB;QAEF,0DAAa;QAAb,0EAAa;QAEb,0DAAe;QAAf,4EAAe;QAoBP,2DAAqB;QAArB,gFAAqB;QAGvC,0DAA+B;QAA/B,mFAA+B;QAIvB,0DAA0B;QAA1B,8EAA0B;;6FAyEtC,eAAe;cAnH3B,uDAAS;eAAC;gBACT,QAAQ,EAAE,aAAa;gBACD,0HAA0H;gBAC1H,wCAAwC;gBAC9D,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4CT;gBACD,MAAM,EAAE;oBACN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA6DC;iBACF;aAEF;;kBAGE,mDAAK;mBAAC,YAAY;;kBAClB,0DAAY;mBAAC,QAAQ,EAAE,EAAC,IAAI,EAAE,0DAAS,EAAC;;;;;;;;;;;;;;AC3H3C;AAAA;AAAA;AAA4B;AAGrB,MAAM,WAAW;IAuBpB;QAEI,oCAAoC;QAEpC,qDAAqD;QAErD,yCAAyC;QACzC,2DAA2D;IAC/D,CAAC;IAEM,MAAM,KAAK,QAAQ;QAEtB,IAAG,WAAW,CAAC,SAAS,IAAI,IAAI;YAAE,WAAW,CAAC,SAAS,GAAG,IAAI,WAAW,EAAE;QAE3E,OAAO,WAAW,CAAC,SAAS;IAChC,CAAC;IAED,IAAW,iBAAiB,CAAC,GAAa;QAEtC,WAAW,CAAC,cAAc,GAAG,GAAG;IACpC,CAAC;IAEM,MAAM,KAAK,IAAI,KAAK,OAAO,4CAAY,CAAC,WAAW,GAAG,WAAW,CAAC,SAAS,EAAC,CAAC;IAE7E,MAAM,CAAC,GAAG,CAAC,MAAc;QAE5B,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC;IAC3C,CAAC;IAEM,MAAM,CAAC,MAAM,CAAC,MAAc;QAE/B,WAAW,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IACpF,CAAC;IAEM,MAAM,CAAC,KAAK,CAAC,OAAkB;QAElC,IAAG,OAAO,IAAI,IAAI;YAAE,WAAW,CAAC,cAAc,GAAG,OAAO;QAExD,IAAG,WAAW,CAAC,SAAS;YAAE,WAAW,CAAC,IAAI,EAAE;QAE5C,WAAW,CAAC,SAAS,GAAG,IAAI;QAE5B,WAAW,CAAC,SAAS,GAAG,4CAAY,CAAC,WAAW;QAEhD,2DAA2D;QAC3D,IAAI,4CAAY,CAAC,KAAK,KAAK,WAAW,EAAE;YACpC,4CAAY,CAAC,MAAM,EAAE,CAAC;SACzB;QAED,WAAW,CAAC,SAAS,EAAE,CAAC,CAAC,sBAAsB;IACnD,CAAC;IAEM,MAAM,CAAC,IAAI;QAEd,WAAW,CAAC,SAAS,GAAG,KAAK;QAE7B,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC;IACzC,CAAC;IAEO,MAAM,CAAC,QAAQ;QAEnB,WAAW,CAAC,cAAc,GAAG,EAAE,GAAG,WAAW,CAAC,GAAG;QAEjD,WAAW,CAAC,YAAY,IAAI,WAAW,CAAC,cAAc;QAEtD,WAAW,CAAC,WAAW,IAAI,CAAC;QAC5B,IAAG,WAAW,CAAC,WAAW,IAAI,WAAW,CAAC,KAAK;YAC3C,WAAW,CAAC,WAAW,GAAG,CAAC;IACnC,CAAC;IAEO,MAAM,CAAC,YAAY,CAAC,UAAkB,EAAE,IAAY;QAExD,gCAAgC;QAEhC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAExC,IAAG,MAAM,CAAC,YAAY,IAAI,UAAU,EAAE;gBAElC,uFAAuF;gBAEvF,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,WAAW,CAAC,cAAc,CAAC;gBAC5D,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,WAAW,CAAC,cAAc,CAAC;aACpE;QACL,CAAC,CAAC;IACN,CAAC;IAGM,MAAM,CAAC,SAAS;QAEnB,OAAM,WAAW,CAAC,YAAY,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,aAAa,EAAE;YAE3E,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,EAAE,WAAW,CAAC,YAAY,CAAC;YAC3E,WAAW,CAAC,QAAQ,EAAE;YACtB,uCAAuC;SAC1C;QAED,WAAW,CAAC,IAAI,GAAG,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,EAAE,WAAW,CAAC,SAAS,CAAC;IACtF,CAAC;;AArHa,eAAG,GAAU,GAAG;AAChB,iBAAK,GAAU,EAAE;AACjB,wBAAY,GAAU,GAAG;AAIzB,0BAAc,GAAa,EAAE;AAE7B,qBAAS,GAAY,KAAK;AAE1B,qBAAS,GAAW,EAAE,EAAC,KAAK;AAC5B,yBAAa,GAAW,EAAE,EAAC,UAAU;AAErC,uBAAW,GAAG,CAAC,EAAC,WAAW;AAC3B,wBAAY,GAAG,CAAC,EAAC,WAAW;AAE5B,0BAAc,GAAW,CAAC;AAE1B,qBAAS,GAAW,CAAC;;;;;;;;;;;;;ACzBvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuF;AAGrC;AAGL;AAEN;;;;;IAU/B,yEAOI;IAAA,yEAAsK;IAA5I,gXAA6C;IAAyF,4DAAM;IACtK,yEAAoK;IAA5I,gXAA6C;IAAyF,4DAAM;IAExK,4DAAM;;;;IAPJ,2FAAgC;IADhC,uFAAuB;;AAwF1B,MAAM,SAAS;IAsBpB,YAAoB,OAAkB;QAAlB,YAAO,GAAP,OAAO,CAAW;QAdtC,uCAAuC;QACvC,8BAA8B;QAEvB,YAAO,GAAa,EAAE;QAa3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;IAExC,CAAC;IAED,IAAI,KAAK;QAEP,OAAO,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE;IAClD,CAAC;IAED,eAAe;QAGb,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC;QAEpC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;QACrD,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC;QAEpE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;QACzC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;IAC7D,CAAC;IAGM,YAAY,CAAC,MAAc,EAAE,YAAoB;QAEtD,IAAI,MAAM,GAAW;YACnB,EAAE,EAAE,kDAAK,CAAC,WAAW,EAAE;YACvB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,YAAY,EAAE,YAAY;YAC1B,MAAM,EAAE,CAAC;SACV;QACD,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;QAEzB,yDAAW,CAAC,GAAG,CAAC,MAAM,CAAC;QAEvB,OAAO,MAAM;IACf,CAAC;IAGM,YAAY,CAAC,MAAc;QAEhC,yDAAW,CAAC,MAAM,CAAC,MAAM,CAAC;QAE1B,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;QACpC,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IAClC,CAAC;IAGO,aAAa,CAAC,CAAC;QAErB,+CAA+C;QAC/C,IAAG,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;YAExC,IAAI,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC;YAEpC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAE5B,IAAG,EAAE,IAAI,MAAM,CAAC,EAAE;oBAChB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YAE7B,CAAC,CAAC;SAEH;aACI,IAAG,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,EAAE,gBAAgB;YAE5E,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,qBAAqB,EAAE;YAE3C,wBAAwB;YACxB,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI;YAC7B,IAAI,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,GAAG;YACnD,YAAY,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK;YAChC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;YAEvC,IAAI,CAAC,YAAY,CAAC,yDAAW,CAAC,YAAY,EAAE,YAAY,CAAC;SAC1D;IACH,CAAC;IAEO,OAAO,CAAC,CAAC;QAEf,6DAAa,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG;IAC3C,CAAC;IAIM,eAAe,CAAC,CAAC,EAAE,MAAc;QAEtC,IAAI,GAAG,GAAgB,CAAC,CAAC,MAAM;QAE/B,IAAI,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;IACxC,CAAC;IAEM,aAAa,CAAC,CAAC,EAAE,MAAc;IAEtC,CAAC;IAEM,eAAe,CAAC,CAAC,EAAE,MAAc;IAExC,CAAC;;kEAzHU,SAAS;yFAAT,SAAS;QA9FlB,yEAAwD;QAAA,uDAAoB;QAAA,4DAAM;QAElF,yEAEI;QAAA,qGAOI;QAKR,4DAAM;;QAhBkB,wFAA+B;QAAC,0DAAoB;QAApB,mFAAoB;QAInE,0DAA8B;QAA9B,gFAA8B;;6FA0F9B,SAAS;cAlGrB,uDAAS;eAAC;gBACT,QAAQ,EAAE,OAAO;gBACjB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;GAqBT;gBACD,MAAM,EAAE;oBAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAoEC;iBACJ;aAEF;;kBAKE,mDAAK;mBAAC,MAAM;;kBAEZ,mDAAK;mBAAC,OAAO;;;;;;;;;;;;;;AC/GhB;AAAA;AAAO,MAAM,KAAK;;AAEA,OAAC,GAAW,QAAQ;AACpB,OAAC,GAAW,QAAQ;AACpB,OAAC,GAAW,QAAQ;AAEpB,QAAE,GAAW,QAAQ;;;;;;;;;;;;;ACTvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4E;AAC1B;AAEN;;;;;IAgBlC,yEACI;IAD0C,+ZAAkC;IAC5E,iEACA;IAAA,yEAAmC;IAAA,uDAAgB;IAAA,4DAAM;IACzD,yEAAiD;IAA3B,iZAA0B;IAAC,4DAAC;IAAA,4DAAM;IACxD,yEAA+C;IAAvB,6YAAsB;IAAC,4DAAC;IAAA,4DAAM;IAE1D,4DAAM;;;;IANkG,mGAAqC;IAAnH,+EAAmB;IAEN,0DAAgB;IAAhB,gFAAgB;;;IAJ3D,sEAEI;IAAA,2GACI;IAOR,4DAAM;;;;IARG,0DAAoB;IAApB,wFAAoB;;AAoD5B,MAAM,SAAS;IAsBpB,YAAoB,OAAkB;QAAlB,YAAO,GAAP,OAAO,CAAW;QAEpC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;IACxC,CAAC;IAjBD,IAAW,YAAY,CAAC,GAAW;QAEjC,IAAI,CAAC,aAAa,GAAG,GAAG;QACxB,6DAAa,CAAC,WAAW,GAAG,GAAG,CAAC,GAAG;IACrC,CAAC;IACD,IAAW,YAAY;QAErB,IAAG,6DAAa,CAAC,QAAQ,IAAI,IAAI;YAAE,OAAO,6DAAa,CAAC,QAAQ;QAEhE,OAAO,IAAI,CAAC,aAAa,GAAG,IAAI;IAClC,CAAC;IAED,IAAW,KAAK,KAAK,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,EAAC,CAAC;IAOrD,eAAe;IAEf,CAAC;IAGM,UAAU,CAAC,CAAC,EAAE,IAAY;QAE/B,IAAI,CAAC,YAAY,GAAG,IAAI;IAC1B,CAAC;IAEM,UAAU,CAAC,IAAY;QAE5B,IAAG,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;;YACjC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;IACvB,CAAC;IAEM,MAAM,CAAC,IAAY;QAExB,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC;QAElC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;IACrC,CAAC;IAEM,MAAM,CAAC,IAAY,IAAI,OAAO,IAAI,YAAY,uDAAM,EAAC,CAAC;;kEAlDlD,SAAS;yFAAT,SAAS;QA1DpB,yEAAsB;QAAA,oEAAS;QAAA,4DAAM;QAErC,yEAEI;QAAA,qGAEI;QAUR,4DAAM;;QAZG,0DAA0B;QAA1B,8EAA0B;;6FAsDxB,SAAS;cA9DrB,uDAAS;eAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;GAqBT;gBACD,MAAM,EAAE;oBACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAkCC;iBACJ;aACF;;kBAGE,mDAAK;mBAAC,UAAU;;kBAChB,mDAAK;mBAAC,YAAY;;;;;;;;;;;;;;ACpErB;AAAA;AAAO,MAAM,aAAa;;AAER,kBAAI,GAAe;IAE7B,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE;IACrC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE;IACtC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE;IACjC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE;IAClC,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAA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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, AfterViewInit, OnDestroy, HostListener, NgZone } from '@angular/core';\r\n\r\nimport { Theremin } from './theremin/theremin';\r\nimport { SceneManager, CameraType } from './scene-manager';\r\nimport { Theremin3D } from './theremin/theremin3D';\r\nimport { ObjectControl } from './object-control';\r\nimport { DragWindow } from './tools/drag-window';\r\n\r\nimport { Storage } from './storage'\r\nimport { BeatMachine } from './beatmachine/beat-machine';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  template: `\r\n\r\n    <div id=\"webGL\"></div>\r\n\r\n\r\n    <div *ngIf=\"true\" id=\"ui-wrapper\" (mouseenter)=\"mouseenterUI()\" (mouseleave)=\"mouseenterUI()\">\r\n\r\n      <div>\r\n\r\n        <div class=\"btn\" (click)=\"setCamera('perspective')\">P</div>\r\n\r\n        <div class=\"btn\" (click)=\"setCamera('orthographic')\">O</div>\r\n\r\n      </div>\r\n\r\n\r\n      <div id=\"obj-menu\" class=\"drag-window\">\r\n\r\n          <div class=\"drag-bar\"></div>\r\n\r\n          <theremin *ngIf=\"theremin && theremin3D\" [theremin]=\"theremin\" [theremin3D]=\"theremin3D\"></theremin>\r\n\r\n          <selected-menu *ngIf=\"theremin3D\" [theremin3D]=\"theremin3D\"></selected-menu>\r\n\r\n          <beatmachine *ngIf=\"theremin3D\" class=\"drag-window\" [theremin3D]=\"theremin3D\"></beatmachine>\r\n\r\n      </div>\r\n\r\n\r\n      <!--<mixer *ngIf=\"theremin3D\" class=\"drag-window\" [theremin3D]=\"theremin3D\"></mixer>-->\r\n\r\n      <dashboard *ngIf=\"theremin3D\" class=\"drag-window\" [theremin]=\"theremin\" [theremin3D]=\"theremin3D\"></dashboard>\r\n\r\n    </div>\r\n        \r\n  `,\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements AfterViewInit, OnDestroy{\r\n\r\n  private container: HTMLElement\r\n\r\n  public theremin: Theremin\r\n  public theremin3D: Theremin3D\r\n  public objCtrl: ObjectControl\r\n  public sm: SceneManager\r\n\r\n  private mouseDownEvent: any\r\n  private mouseUpEvent: any\r\n  private mouseMovevent: any\r\n  private keydownEvent: any\r\n  private keyupEvent: any\r\n  private resizeEvent: any\r\n\r\n  private dragWindow: DragWindow\r\n\r\n  public UIHidden: boolean = false\r\n\r\n  private AFID: number\r\n\r\n  constructor(public zone: NgZone) {\r\n\r\n    this.dragWindow = new DragWindow()\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n\r\n    this.container = document.querySelector('#webGL')\r\n\r\n    this.sm = new SceneManager(this.container)\r\n\r\n    window.setTimeout(()=>{\r\n\r\n      this.theremin = new Theremin()\r\n\r\n      this.serializeIn(Storage.load())\r\n      \r\n      this.theremin.toggleOnOff(false)\r\n\r\n      this.theremin3D = new Theremin3D(this.theremin)\r\n      this.objCtrl = new ObjectControl(this.theremin3D)\r\n\r\n\r\n      // this.theremin.toggleOnOff(false)\r\n\r\n\r\n      this.loop()\r\n    })\r\n\r\n\r\n\r\n\r\n    this.resizeEvent = this.onResize.bind(this)\r\n    window.onresize = this.resizeEvent\r\n\r\n    this.mouseDownEvent = this.onMouseDown.bind(this)\r\n    document.addEventListener('mousedown', this.mouseDownEvent, false)\r\n\r\n    this.mouseUpEvent = this.onMouseUp.bind(this)\r\n    document.addEventListener('mouseup', this.mouseUpEvent, false)\r\n    \r\n    this.mouseMovevent = this.onMouseMove.bind(this)\r\n    document.addEventListener('mousemove', this.mouseMovevent, false)\r\n\r\n    \r\n    this.keydownEvent = this.onkeydown.bind(this)\r\n    document.addEventListener('keydown', this.keydownEvent, false)\r\n\r\n    this.keyupEvent = this.onkeyup.bind(this)\r\n    document.addEventListener('keyup', this.keyupEvent, false)\r\n  }\r\n\r\n\r\n  // private fixedUpdateTiming: number = 20;\r\n  // private physicsTimeSimulated:number = Date.now();\r\n  // private _deltaTime: number = 0;\r\n  // private lastUpdate: number = Date.now();\r\n\r\n  public loop(): void {\r\n\r\n    // while(this.physicsTimeSimulated < Date.now()){\r\n\r\n    //   this.fixedUpdate()\r\n    //   this.physicsTimeSimulated += this.fixedUpdateTiming\r\n    // }\r\n\r\n    this.update()\r\n\r\n    // this._deltaTime = Date.now() - this.lastUpdate;\r\n    // this.lastUpdate = Date.now();\r\n\r\n    this.zone.runOutsideAngular(()=> {\r\n      this.AFID = window.requestAnimationFrame(this.loop.bind(this))\r\n    })\r\n  }\r\n\r\n  private update() {\r\n    // console.log('update')\r\n\r\n    this.theremin.update()\r\n    this.theremin3D.update()\r\n\r\n    this.sm.update()\r\n  }\r\n\r\n  private fixedUpdate() {\r\n    // console.log('fixed update')\r\n  }\r\n\r\n\r\n  public rotateCamera(e) {\r\n\r\n    let axis = e.target.getAttribute('axis')\r\n\r\n    if(axis == 'x') axis = 'y'\r\n    else if(axis == 'y') axis = 'z'\r\n    else if(axis == 'z') axis = 'x'\r\n\r\n    // this.rotateCamera(axis)\r\n\r\n    e.target.setAttribute('axis', axis)\r\n  }\r\n\r\n  public setCamera(type:string) {\r\n\r\n    if(type == 'orthographic') {\r\n      SceneManager.activeCamera = CameraType.ORTHOGRAPHIC\r\n      SceneManager.orthographic.position.set(0, 0, 2)\r\n    }\r\n    else if(type == 'perspective') \r\n      SceneManager.activeCamera = CameraType.PERSPECTIVE\r\n\r\n    SceneManager.orbitCamera = SceneManager.currentCamera\r\n  }\r\n\r\n\r\n  public mouseenterUI() {\r\n    \r\n    this.UIHidden = this.objCtrl.dragObj\r\n  }\r\n\r\n  public onMouseDown(e) {\r\n\r\n    this.dragWindow.onMouseDown(e)\r\n    \r\n  }\r\n\r\n  public onMouseMove(e) {\r\n    \r\n    this.dragWindow.onMouseMove(e)\r\n  }\r\n  \r\n  public onMouseUp(e) {\r\n    \r\n    this.dragWindow.onMouseUp(e)\r\n  }\r\n\r\n  \r\n  public onkeydown(e) {\r\n\r\n\r\n  }\r\n\r\n  \r\n  public onkeyup(e: KeyboardEvent) {\r\n\r\n    console.log(e)\r\n    if(e.key == ' ' && e.code == 'Space') {\r\n\r\n      this.theremin.toggleOnOff()\r\n    }\r\n    else if(e.key == 'p' && e.code == 'KeyP') {\r\n\r\n      this.theremin.toggleOnOff()\r\n    }\r\n  }\r\n\r\n\r\n  public onResize() {\r\n\r\n    this.sm.resize()\r\n  }\r\n\r\n\r\n\r\n  private serializeIn(file: string) {\r\n\r\n    let obj: {} = JSON.parse(file)\r\n\r\n    if(obj['theremin']) this.theremin.serializeIn(obj['theremin'])\r\n\r\n    if(obj['beatmachine']) {\r\n\r\n      BeatMachine.bpm = obj['beatmachine']['bpm']\r\n      BeatMachine.beats = obj['beatmachine']['beats']\r\n      BeatMachine.noteDuration = obj['beatmachine']['noteDuration']\r\n    }\r\n  }\r\n\r\n  private serializeOut() {\r\n\r\n    let samples: {}[] = []\r\n\r\n    let obj: {} = {\r\n      theremin: this.theremin.serializeOut(),\r\n      beatmachine: {\r\n        bpm: BeatMachine.bpm,\r\n        beats: BeatMachine.beats,\r\n        noteDuration: BeatMachine.noteDuration,\r\n      }\r\n    }\r\n\r\n    return JSON.stringify(obj)\r\n  }\r\n\r\n\r\n\r\n  @HostListener('window:beforeunload', ['$event'])\r\n  unloadNotification($event: any) {\r\n\r\n    this.ngOnDestroy()\r\n  }\r\n    \r\n  ngOnDestroy() {\r\n\r\n    window.cancelAnimationFrame(this.AFID)\r\n\r\n    Storage.save(this.serializeOut())\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AppComponent } from './app.component';\n\nimport { Selected } from './selected-menu/selected.component'\nimport { TrackView } from './beatmachine/track.component'\nimport { Dashboard } from './dashboard/dashboard.component'\nimport { ThereminView } from './theremin/theremin.component'\nimport { BeatMachineView } from './beatmachine/beat-machine.component'\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    Selected,\n    TrackView,\n    Dashboard,\n    ThereminView,\n    BeatMachineView\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Vector3 } from 'three'\r\nimport { Axis } from '../theremin/axis'\r\nimport { Note } from '../theremin/note'\r\n\r\n\r\nexport class AxesBehaviour {\r\n\r\n    public name: string = ''\r\n\r\n    public sF: number = 10\r\n\r\n    public axis: Axis\r\n\r\n    public min: number = 0\r\n    public max: number = 1000\r\n\r\n    public muted: boolean = false\r\n\r\n    constructor(axis?: Axis) {\r\n\r\n        this.axis = axis\r\n    }\r\n\r\n    public compute1DPosition(note: Note) {}\r\n\r\n    public processAlongDimension(note: Note, position: Vector3) {}\r\n\r\n}","import { AxesBehaviour } from './axes-behaviour'\r\nimport { Note } from '../theremin/note'\r\nimport { NoteData, NoteDataClass } from \"../data/frequency-of-notes\"\r\nimport { Axis } from '../theremin/axis'\r\nimport { Vector3 } from 'three'\r\n\r\nexport class FrequencyShift extends AxesBehaviour {\r\n\r\n    noteData: NoteData[] = []\r\n\r\n    keydown:boolean = false\r\n\r\n    constructor(axis?: Axis) { \r\n        \r\n        super(axis)\r\n        \r\n        this.name = 'Frequency Shift'\r\n\r\n        this.sF = 10\r\n\r\n        this.min = 0\r\n        this.max = 2000\r\n\r\n        this.muted = false\r\n\r\n\r\n        window.addEventListener('keydown', this.onkeydown.bind(this))\r\n        window.addEventListener('keyup', this.onkeyup.bind(this))\r\n    }\r\n\r\n    private onkeydown(e: KeyboardEvent) {\r\n        if(e.key == 's') this.keydown = true\r\n    }\r\n    private onkeyup(e: KeyboardEvent) {\r\n        if(e.key == 's') this.keydown = false\r\n    }\r\n\r\n    public snapToNote(frequency: number) : number {\r\n\r\n        if(!this.keydown) return frequency\r\n\r\n        let nearest: number = 1000\r\n        let currentNote: NoteData\r\n\r\n        NoteDataClass.data.forEach(data => {\r\n\r\n            if(nearest > Math.abs(frequency - data.frequency)) {\r\n\r\n                nearest = Math.abs(frequency - data.frequency)\r\n\r\n                currentNote = data\r\n            }\r\n        })\r\n\r\n        return currentNote.frequency\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    public compute1DPosition(note: Note) {\r\n\r\n        note.position[this.axis] = note.frequency / this.sF\r\n    }\r\n\r\n    public processAlongDimension(note: Note, position: Vector3) {\r\n\r\n        if(this.axis == null) return\r\n        if(this.muted) return\r\n\r\n        let frequency = Math.round((position[this.axis] * this.sF) * 100) / 100\r\n\r\n        note.frequency = this.snapToNote(frequency)\r\n    }\r\n}","import { AxesBehaviour } from './axes-behaviour';\r\nimport { Note } from '../theremin/note';\r\nimport { Axis } from '../theremin/axis'\r\nimport * as Tone from 'tone'\r\nimport { Vector3 } from 'three';\r\n\r\nexport class Octivator extends AxesBehaviour {\r\n\r\n    private oscs: OscillatorNode[] = []\r\n\r\n    private currentMultiplier: number\r\n\r\n    constructor(axis?: Axis) { \r\n        \r\n        super(axis)\r\n        \r\n        this.name = 'Octivator'\r\n\r\n        this.sF = 10\r\n\r\n        this.min = 0\r\n        this.max = 100\r\n\r\n        this.muted = false\r\n    }\r\n\r\n\r\n\r\n    public compute1DPosition(note: Note) {\r\n\r\n    }\r\n\r\n    // Minus value go low, plus go high\r\n    public processAlongDimension(note: Note, position: Vector3) {\r\n\r\n\r\n        if(this.axis == null) return\r\n        if(this.muted) return\r\n\r\n        let count:number = Math.round(note.position[this.axis] / this.sF)\r\n        let multipier:number = count +1\r\n\r\n        count = Math.abs(count)\r\n\r\n        // if(this.currentMultiplier == multipier) return\r\n\r\n        this.currentMultiplier = multipier\r\n        \r\n        this.oscs.forEach(osc => {\r\n\r\n            osc.stop()\r\n            osc.disconnect()\r\n        })\r\n        this.oscs = []\r\n\r\n        let neg: boolean = false\r\n        if(multipier < 0) neg = true\r\n\r\n        for(let i = 1; i <= count; i++) {\r\n\r\n            let osc = Tone.context.createOscillator()\r\n            // osc.type = node.wave\r\n            // osc.type = 'sine'\r\n            // osc.connect(entity.gain)\r\n            // if(neg)\r\n            //     osc.frequency.setValueAtTime(entity.frequency / multipier, Tone.context.currentTime)\r\n            // else osc.frequency.setValueAtTime(multipier * entity.frequency, Tone.context.currentTime)\r\n\r\n            osc.start()\r\n\r\n            this.oscs.push(osc)\r\n        }\r\n    }\r\n\r\n    private createOctave(frequency: number) {\r\n\r\n\r\n\r\n    }\r\n}","import { AxesBehaviour } from './axes-behaviour';\r\nimport { Note } from '../theremin/note';\r\nimport { Axis } from '../theremin/axis'\r\nimport { Vector3 } from 'three';\r\n\r\nexport class VolumeShift extends AxesBehaviour {\r\n\r\n    constructor(axis?: Axis) { \r\n        \r\n        super(axis)\r\n        \r\n        this.name = 'Volume Shift'\r\n\r\n        this.sF = 100\r\n\r\n        this.min = 0\r\n        this.max = 100\r\n\r\n        this.muted = false\r\n    }\r\n\r\n\r\n\r\n    public compute1DPosition(note: Note) {\r\n\r\n        if(note instanceof Note) \r\n            note.position[this.axis] = note.volume * this.sF\r\n    }\r\n\r\n    public processAlongDimension(note: Note, position: Vector3) {\r\n\r\n        if(this.axis == null) return\r\n        if(this.muted) return\r\n        \r\n        note.volume = position[this.axis] / this.sF\r\n    }\r\n}","import { Component, AfterViewInit, Input, ViewChildren, OnDestroy, NgZone } from '@angular/core';\r\nimport { Theremin3D } from '../theremin/theremin3D';\r\nimport { BeatMachine } from './beat-machine';\r\nimport { Sample } from './sample';\r\nimport { TrackView } from './track.component';\r\n\r\n@Component({\r\n  selector: 'beatmachine', // TIMELINE NEEDS TO HAVE A BEAT MARKING LIKE A TAKT. MAYBE MAKE IT EXPANDABLE BUT BEGIN WITH 4/4 \r\n                        // INSIDE THE TIMELINE ARE ALL THE INSTRUMENTS IN THIS CASE THE SAMPLES WHICH ARE ALL THE NOTES OR CHORDS WITHOUT A PARENT\r\n                        // EACH INSTRUMENT HAS ITS OWN DRAW LINE\r\n  template: `  \r\n\r\n      \r\n    <div style=\"margin: 15px 0px;\">\r\n\r\n      <div *ngIf=\"theremin3D\" class=\"btn play\" (click)=\"play()\"></div>\r\n\r\n      <div *ngIf=\"theremin3D\" class=\"btn pause\" (click)=\"pause()\"></div>\r\n\r\n      <input type=\"number\" [value]=\"bpm\" (change)=\"bpm = $event.target.value\" />\r\n\r\n      <input type=\"number\" [value]=\"beats\" (change)=\"beats = $event.target.value\" />\r\n\r\n      <select name=\"noteDuration\" (change)=\"noteDuration = $event.target.value\">\r\n\r\n          <option value=\"1\">1</option>\r\n          <option value=\"1/2\">1/2</option>\r\n          <option value=\"1/4\">1/4</option>\r\n          <option value=\"1/8\">1/8</option>\r\n          <option value=\"1/16\">1/16</option>\r\n          <option value=\"1/32\">1/32</option>\r\n          <option value=\"1/64\">1/64</option>\r\n\r\n      </select>\r\n\r\n    </div>\r\n\r\n    \r\n\r\n    <div id=\"timeline-wrapper\">\r\n\r\n        <div id=\"timeline-pointer\" [style.left.%]=\"time\"></div>\r\n\r\n        <div id=\"timeline\">\r\n            <div *ngFor=\"let beat of beatsArray\" class=\"beat-marking\" [style.left.%]=\"beat*(100/beats)\"></div>\r\n        </div>\r\n        \r\n        <div id=\"tracks-wrapper\">\r\n          <track #tracks *ngFor=\"let note of notes\" [note]=\"note\" [beats]=\"beats\" class=\"track-timeline\" />\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n  `,\r\n  styles: [\r\n    `\r\n\r\n    :host {\r\n      \r\n      display:block;    \r\n      width: 100%;\r\n      height: auto;\r\n      padding: 20px;\r\n      color: #fefefe;\r\n  \r\n      resize: vertical;\r\n      overflow: auto;\r\n    }\r\n\r\n\r\n    #timeline-wrapper {\r\n\r\n      position: relative;\r\n      width: 80%;\r\n      height: 100%;\r\n      color: #000;\r\n    }\r\n\r\n    #timeline-pointer {\r\n      position:absolute;\r\n      top: 0px;\r\n      margin-left: 50px;\r\n\r\n      width: 1px;\r\n      height: 100%;\r\n      background-color: #000;\r\n    }\r\n\r\n    #timeline {\r\n      position: absolute;\r\n      top: -10px;\r\n      width: calc(100% - 50px);\r\n      height: 10px;\r\n      margin-left: 50px;\r\n      background-color: #FFaa00;\r\n    }\r\n\r\n\r\n    .beat-marking {\r\n      position: absolute;\r\n      top: 0px;\r\n      width: 1px;\r\n      height: 100%;\r\n      background-color: #000;\r\n    }\r\n\r\n    #tracks-wrapper {\r\n\r\n      overflow-x: hidden;\r\n      overflow-y: auto;\r\n      max-height: 150px;\r\n      height: 100%;\r\n      width: 100%\r\n    }\r\n\r\n\r\n    `\r\n  ],\r\n\r\n})\r\nexport class BeatMachineView implements AfterViewInit, OnDestroy {\r\n\r\n  @Input('theremin3D') theremin3D: Theremin3D\r\n  @ViewChildren('tracks', {read: TrackView}) private tracks: TrackView[]\r\n\r\n  public _samples: Sample[] = []\r\n\r\n  public time:number\r\n\r\n  constructor(private zone: NgZone) {\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    \r\n  }\r\n\r\n\r\n\r\n  private playTO:number\r\n  public play() {\r\n\r\n    //Theremin.togglePlay(false)\r\n\r\n    this.notes.forEach(note => {\r\n\r\n      note.ctrl.stop()\r\n    })\r\n    BeatMachine.stop()\r\n\r\n\r\n    // this.zone.runOutsideAngular(()=> {\r\n\r\n    //   this.playTO = window.setInterval(()=> { this.computeTime() }, 20)\r\n    // })\r\n\r\n    BeatMachine.start(this.samples)\r\n  }\r\n\r\n  public pause() {\r\n\r\n      BeatMachine.stop()\r\n\r\n      window.clearInterval(this.playTO)\r\n  }\r\n\r\n  // SAMPLE DOESNT KNOW ITS LENGTH OR SCHEDULE TIME ??\r\n  get samples() {\r\n\r\n    if(!this.tracks) return\r\n\r\n    this._samples = []\r\n\r\n    this.tracks.forEach(track => {\r\n\r\n        this._samples.push(...track.samples)\r\n    })\r\n\r\n    return this._samples\r\n  }\r\n\r\n  get notes() {\r\n\r\n    return this.theremin3D.notes3D\r\n  }\r\n\r\n  public computeTime() {\r\n\r\n    this.time = ((BeatMachine.time % (BeatMachine.secondsPerBeat * BeatMachine.beats)) / (BeatMachine.secondsPerBeat * BeatMachine.beats)) * 100\r\n    return this.time\r\n  }\r\n\r\n  // public get currentBeat() { return BeatMachine.currentNote }\r\n\r\n  public get bpm() { return BeatMachine.bpm }\r\n  public set bpm(bpm: number) {\r\n\r\n      BeatMachine.bpm = bpm\r\n  }\r\n\r\n  public get beats() { return BeatMachine.beats }\r\n  public set beats(beats: number) { BeatMachine.beats = beats }\r\n\r\n  public get beatsArray() { \r\n\r\n      let array:number[] = []\r\n\r\n      for(let i = 0; i < BeatMachine.beats; i++) array.push(i)\r\n\r\n      return array\r\n  }\r\n\r\n  public get noteDuration() { return BeatMachine.noteDuration }\r\n  public set noteDuration(duration:string) {\r\n\r\n    switch(duration) {\r\n      case '1':\r\n      case '1/2':\r\n      case '1/4':\r\n      case '1/8':\r\n      case '1/16':\r\n      case '1/32':\r\n      case '1/64':\r\n          BeatMachine.noteDuration = duration\r\n        break\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n\r\n    this.pause()\r\n  }\r\n} ","import { Sample } from './sample'\r\nimport * as Tone from 'tone'\r\n\r\n\r\nexport class BeatMachine {\r\n\r\n    private static _instance: BeatMachine\r\n    public static bpm:number = 200\r\n    public static beats:number = 16\r\n    public static noteDuration:string = '1'\r\n\r\n    public static masterNode: GainNode\r\n\r\n    public static samplesInQueue: Sample[] = []\r\n\r\n    public static isPlaying: boolean = false\r\n\r\n    public static lookahead: number = 25 // MS\r\n    public static scheduleAhead: number = .1 // Seconds\r\n    \r\n    public static currentNote = 0 // 1/4 Note\r\n    public static nextNoteTime = 0 // 1/4 Note\r\n\r\n    public static secondsPerBeat: number = 0\r\n\r\n    public static startTime: number = 0\r\n\r\n    constructor() {\r\n        \r\n        // Tone.context = new AudioContext()\r\n\r\n        // BeatMachine.masterNode = Tone.context.createGain()\r\n\r\n        // BeatMachine.masterNode.gain.value = .3\r\n        // BeatMachine.masterNode.connect(Tone.context.destination)\r\n    }\r\n\r\n    public static get instance() {\r\n\r\n        if(BeatMachine._instance == null) BeatMachine._instance = new BeatMachine()\r\n\r\n        return BeatMachine._instance\r\n    }\r\n\r\n    public set setSamplesInQueue(val: Sample[]){\r\n\r\n        BeatMachine.samplesInQueue = val\r\n    }\r\n\r\n    public static get time() { return Tone.context.currentTime - BeatMachine.startTime }\r\n\r\n    public static add(sample: Sample) {\r\n\r\n        BeatMachine.samplesInQueue.push(sample)\r\n    }\r\n    \r\n    public static remove(sample: Sample) {\r\n\r\n        BeatMachine.samplesInQueue.splice(BeatMachine.samplesInQueue.indexOf(sample), 1)\r\n    }\r\n\r\n    public static start(samples?: Sample[]) {\r\n\r\n        if(samples != null) BeatMachine.samplesInQueue = samples\r\n\r\n        if(BeatMachine.isPlaying) BeatMachine.stop()\r\n\r\n        BeatMachine.isPlaying = true\r\n\r\n        BeatMachine.startTime = Tone.context.currentTime\r\n\r\n        // check if context is in suspended state (autoplay policy)\r\n        if (Tone.context.state === 'suspended') {\r\n            Tone.context.resume();\r\n        }\r\n\r\n        BeatMachine.scheduler(); // kick off scheduling\r\n    }\r\n\r\n    public static stop() {\r\n\r\n        BeatMachine.isPlaying = false\r\n\r\n        window.clearTimeout(BeatMachine.TOID)\r\n    }\r\n\r\n    private static nextNote() {\r\n\r\n        BeatMachine.secondsPerBeat = 60 / BeatMachine.bpm\r\n\r\n        BeatMachine.nextNoteTime += BeatMachine.secondsPerBeat\r\n\r\n        BeatMachine.currentNote += 1\r\n        if(BeatMachine.currentNote == BeatMachine.beats)\r\n            BeatMachine.currentNote = 0\r\n    }\r\n    \r\n    private static scheduleNote(beatNumber: number, time: number) {\r\n\r\n        // console.log(beatNumber, time)\r\n\r\n        BeatMachine.samplesInQueue.forEach(sample => {\r\n\r\n            if(sample.scheduleTime == beatNumber) {\r\n\r\n                // console.log('play', sample.scheduleTime, sample.length * BeatMachine.secondsPerBeat)\r\n\r\n                sample.note.play(sample.length * BeatMachine.secondsPerBeat)\r\n                sample.note.ctrl.play(sample.length * BeatMachine.secondsPerBeat)\r\n            }\r\n        })\r\n    }\r\n\r\n    static TOID: number\r\n    public static scheduler() {\r\n        \r\n        while(BeatMachine.nextNoteTime < BeatMachine.time + BeatMachine.scheduleAhead) {\r\n\r\n            BeatMachine.scheduleNote(BeatMachine.currentNote, BeatMachine.nextNoteTime)\r\n            BeatMachine.nextNote()\r\n            // console.log(BeatMachine.currentNote)\r\n        }\r\n\r\n        BeatMachine.TOID = window.setTimeout(BeatMachine.scheduler, BeatMachine.lookahead)\r\n    }\r\n}","import { Component, AfterViewInit, OnDestroy, Input, ElementRef } from '@angular/core';\r\n\r\nimport * as THREE from 'three'\r\nimport { ObjectControl } from '../object-control';\r\nimport { Theremin3D } from '../theremin/theremin3D';\r\nimport { Sample } from './sample';\r\nimport { BeatMachine } from './beat-machine';\r\nimport { Note3D } from '../theremin/note3D';\r\nimport { Tools } from '../tools/tools';\r\n\r\n@Component({\r\n  selector: 'track',\r\n  template: `\r\n  \r\n    <div class=\"note-title\" [style.backgroundColor]=\"color\">{{ note.ctrl.type }}</div>\r\n\r\n    <div class=\"creation-click-zone\">\r\n\r\n        <div *ngFor=\"let sample of samples\" \r\n          class=\"sample\" \r\n          data-id=\"{{sample.id}}\" \r\n          [style.background-color]=\"color\" \r\n          [style.left.%]=\"sample.scheduleTime * (100/beats)\" \r\n          [style.width.%]=\"100 / beats\">\r\n\r\n            <div class=\"sample-start\" (mousedown)=\"sampleMouseDown($event, sample)\" (mousemove)=\"sampleMouseMove($event, sample)\" (mouseup)=\"sampleMouseUp($event, sample)\"></div>\r\n            <div class=\"sample-end\" (mousedown)=\"sampleMouseDown($event, sample)\" (mousemove)=\"sampleMouseMove($event, sample)\" (mouseup)=\"sampleMouseUp($event, sample)\"></div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n  `,\r\n  styles: [\r\n\r\n      `\r\n      \r\n    :host {\r\n\r\n      display:block;\r\n      width: 100%;\r\n      height: 20px;\r\n      line-height: 20px;\r\n      background-color: #ddd;\r\n      color: #000;\r\n      border-bottom: 1px solid #FFaa00;\r\n      padding: 0px;\r\n      margin: 0px;\r\n    }\r\n    :host:last-child() {\r\n        border-bottom: none;\r\n    }\r\n\r\n    .note-title {\r\n        display: inline-block;\r\n        width: 50px;\r\n        height: 100%;\r\n        line-height: inherit;\r\n        padding: 0px 3px;\r\n        border-right: 1px solid #3f3f3f;\r\n        vertical-align: top;\r\n    }\r\n\r\n    .creation-click-zone {\r\n      position: relative;\r\n      display: inline-block;\r\n\r\n      width: calc(100% - 50px);\r\n      height: 100%;\r\n      vertical-align: top;\r\n\r\n    }\r\n\r\n    .sample {\r\n      position: absolute;\r\n      top: 10%;\r\n      left: 0px;\r\n\r\n      width: 10px;\r\n      height: 80%;\r\n      background-color: #00DDAA;\r\n      \r\n    }\r\n\r\n    .sample-start,\r\n    .sample-end {\r\n      position:absolute;\r\n      top:0px;\r\n      width: 4px;\r\n      height:100%;\r\n      display: inline-block;\r\n      cursor: col-resize;\r\n    }\r\n    .sample-start{\r\n      left: 0px;\r\n    }\r\n    .sample-end {\r\n      right: 0px;\r\n    }\r\n    .sample-start:hover,\r\n    .sample-end:hover {\r\n      background-color:#458459;\r\n    }\r\n      `\r\n  ]\r\n  \r\n})\r\nexport class TrackView implements AfterViewInit{\r\n\r\n  // @Input('objCtrl') objCtrl: ObjectControl \r\n  // @Input('theremin3D') theremin3D: Theremin3D\r\n  @Input('note') public note: Note3D\r\n\r\n  @Input('beats') public beats: number\r\n\r\n  // public set samples(val: Sample[]) {}\r\n  // public activeSample: Sample\r\n\r\n  public samples: Sample[] = []\r\n\r\n  private selectedSample: Sample\r\n\r\n  private host: HTMLElement\r\n\r\n  private doubleClickEvent: any\r\n  private clickEvent: any\r\n\r\n\r\n\r\n  constructor(private hostRef:ElementRef) {\r\n\r\n    this.host = this.hostRef.nativeElement\r\n\r\n  }\r\n\r\n  get color() {\r\n\r\n    return '#' + this.note.ctrl.color.getHexString()\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n\r\n\r\n    console.log('track note', this.note)\r\n\r\n    this.doubleClickEvent = this.onDoubleClick.bind(this)\r\n    this.host.addEventListener('dblclick', this.doubleClickEvent, false)\r\n\r\n    this.clickEvent = this.onClick.bind(this)\r\n    this.host.addEventListener('click', this.clickEvent, false)\r\n  }\r\n\r\n\r\n  public createSample(length: number, scheduleTime: number) {\r\n\r\n    let sample: Sample = {\r\n      id: Tools.getUniqueID(),\r\n      note: this.note,\r\n      scheduleTime: scheduleTime,\r\n      length: 1\r\n    }\r\n    console.log('sample', sample)\r\n    this.samples.push(sample)\r\n\r\n    BeatMachine.add(sample)\r\n\r\n    return sample\r\n  }\r\n  \r\n\r\n  public removeSample(sample: Sample) {\r\n\r\n    BeatMachine.remove(sample)\r\n\r\n    let i = this.samples.indexOf(sample)\r\n    return this.samples.splice(i, 1)\r\n  }\r\n\r\n  \r\n  private onDoubleClick(e) {\r\n\r\n    // Remove Sample on dblclick directly on sample\r\n    if(e.target.classList.contains('sample')) {\r\n\r\n      let id = e.target.getAttribute('id')\r\n\r\n      this.samples.forEach(sample => {\r\n\r\n        if(id == sample.id) \r\n          this.removeSample(sample)\r\n\r\n      })\r\n      \r\n    }\r\n    else if(e.target.classList.contains('creation-click-zone')) { // Create sample\r\n\r\n      let rect = e.target.getBoundingClientRect()\r\n\r\n      // Cutting to beat begin\r\n      let x = e.clientX - rect.left\r\n      let scheduleTime = (x / e.target.clientWidth) * 100\r\n      scheduleTime /= 100 / this.beats\r\n      scheduleTime = Math.trunc(scheduleTime)\r\n\r\n      this.createSample(BeatMachine.nextNoteTime, scheduleTime)\r\n    }\r\n  }\r\n\r\n  private onClick(e) {\r\n\r\n    ObjectControl.selectedObj = this.note.obj\r\n  }\r\n\r\n\r\n  private dragStartX:number\r\n  public sampleMouseDown(e, sample: Sample) {\r\n    \r\n    let ele: HTMLElement = e.target\r\n\r\n    let sampleEle = ele.closest('.sample')\r\n  }\r\n  \r\n  public sampleMouseUp(e, sample: Sample) {\r\n    \r\n  }\r\n  \r\n  public sampleMouseMove(e, sample: Sample) {\r\n    \r\n  }\r\n} ","\r\n\r\n\r\nexport class Color {\r\n\r\n    public static X: number = 0xFFFFFF\r\n    public static Y: number = 0xFFFFFF\r\n    public static Z: number = 0xFFFFFF\r\n\r\n    public static BG: number = 0x020202\r\n\r\n\r\n\r\n\r\n\r\n}","import { Component, AfterViewInit, ElementRef, Input } from '@angular/core';\r\nimport { ObjectControl } from '../object-control';\r\nimport { Theremin3D } from '../theremin/theremin3D';\r\nimport { Note3D } from '../theremin/note3D';\r\nimport { Note } from '../theremin/note';\r\nimport { Theremin } from '../theremin/theremin';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'dashboard',\r\n  template: `\r\n    \r\n  <div class=\"drag-bar\">DASHBOARD</div>\r\n\r\n  <div class=\"dashboard-cont\">\r\n\r\n      <div *ngFor=\"let note of notes\">\r\n\r\n          <div *ngIf=\"isNote(note)\" [id]=\"note.ctrl.id\" (click)=\"selectNote($event, note)\" class=\"dashboard-item\" [class.active]=\"selectedNote == note\">\r\n              Note\r\n              <div  class=\"dashboard-item-inner\">{{note.ctrl.id}}</div>\r\n              <div class=\"btn mute\" (click)=\"toggleMute(note)\">M</div>\r\n              <div class=\"btn delete\" (click)=\"delete(note)\">X</div>\r\n              \r\n          </div>\r\n          \r\n      </div>\r\n      \r\n  </div>\r\n  \r\n  \r\n  `,\r\n  styles: [\r\n      `\r\n      \r\n    :host {\r\n\r\n        position: absolute;\r\n        right: 0px;\r\n        top: 0px;\r\n    \r\n        width: 200px;\r\n        color: #fefefe;\r\n    }\r\n      \r\n    .dashboard-cont {\r\n\r\n        width: 100%;\r\n        height: auto;\r\n\r\n        max-height: 150px;\r\n\r\n        overflow-y: auto;\r\n\r\n        padding: 5px;\r\n    }\r\n\r\n    .dashboard-item {\r\n\r\n      width: 100%;\r\n      height: 30px;\r\n    }\r\n\r\n    .dashboard-item.active {\r\n      background-color: #3f3f3f;\r\n    }\r\n\r\n      ` \r\n  ]\r\n})\r\nexport class Dashboard implements AfterViewInit{\r\n\r\n  @Input('theremin') public theremin: Theremin\r\n  @Input('theremin3D') public theremin3D: Theremin3D\r\n\r\n  private host: HTMLElement\r\n\r\n  private _selectedNote: Note3D\r\n  public set selectedNote(val: Note3D) {\r\n\r\n    this._selectedNote = val\r\n    ObjectControl.selectedObj = val.obj\r\n  }\r\n  public get selectedNote() {\r\n\r\n    if(ObjectControl.selected != null) return ObjectControl.selected \r\n\r\n    return this._selectedNote = null\r\n  }\r\n\r\n  public get notes() { return this.theremin3D.notes3D }\r\n\r\n  constructor(private hostRef:ElementRef) {\r\n\r\n    this.host = this.hostRef.nativeElement\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n\r\n  }\r\n\r\n\r\n  public selectNote(e, note: Note3D) {\r\n\r\n    this.selectedNote = note\r\n  }\r\n\r\n  public toggleMute(note: Note3D) {\r\n\r\n    if(note.ctrl.muted) note.ctrl.unmute()\r\n    else note.ctrl.mute()\r\n  }\r\n\r\n  public delete(note: Note3D) {\r\n\r\n    this.theremin3D.removeNote3D(note)\r\n\r\n    this.theremin.deleteNote(note.ctrl)\r\n  }\r\n\r\n  public isNote(note: Note3D) { return note instanceof Note3D }\r\n}  ","\r\nexport interface NoteData {\r\n    note: string,\r\n    frequency: number,\r\n}\r\n\r\nexport class NoteDataClass {  // STRUCTURE DIFFERENT KEYS (ALL OF A or so)\r\n\r\n    public static data: NoteData[] = [\r\n\r\n        { note: 'C0', frequency: 16.35\t},\r\n        { note: 'C#0/Db0', frequency: 17.32 },\r\n        { note: 'D0', frequency: 18.35 },\r\n        { note: 'D#0/Eb0', frequency: 19.45 },\r\n        { note: 'E0', frequency: 20.60 },\r\n        { note: 'F0', frequency: 21.83 },\r\n        { note: 'F#0/Gb0', frequency: 23.12\t},\r\n        { note: 'G0', frequency: 24.50 },\r\n        { note: 'G#0/Ab0', frequency: 25.96 },\r\n        { note: 'A0', frequency: 27.50 },\r\n        { note: 'A#0/Bb0', frequency: 29.14 },\r\n        { note: 'B0', frequency: 30.87 },\r\n        { note: 'C1', frequency: 32.70 },\r\n        { note: 'C#1/Db1', frequency: 34.65 },\r\n        { note: 'D1', frequency: 36.71 },\r\n        { note: 'D#1/Eb1', frequency: 38.89 },\r\n        { note: 'E1', frequency: 41.20 },\r\n        { note: 'F1', frequency: 43.65 },\r\n        { note: 'F#1/Gb1', frequency: 46.25 },\r\n        { note: 'G1', frequency: 49.00 },\r\n        { note: 'G#1/Ab1', frequency: 51.91 },\r\n        { note: 'A1', frequency: 55.00 },\r\n        { note: 'A#1/Bb1', frequency: 58.27 },\r\n        { note: 'B1', frequency: 61.74 }, \r\n        { note: 'C2', frequency: 65.41 },\r\n        { note: 'C#2/Db2', frequency: 69.30\t},\r\n        { note: 'D2', frequency: 73.42 },\r\n        { note: 'D#2/Eb2', frequency: 77.78\t},\r\n        { note: 'E2', frequency: 82.41 },\r\n        { note: 'F2', frequency: 87.31 },\r\n        { note: 'F#2/Gb2', frequency: 92.50\t},\r\n        { note: 'G2', frequency: 98.00 },\r\n        { note: 'G#2/Ab2', frequency: 103.83 },\r\n        { note: 'A2', frequency: 110.00 },\r\n        { note: 'A#2/Bb2', frequency: 116.54 },\r\n        { note: 'B2', frequency: 123.47 },\r\n        { note: 'C3', frequency: 130.81 },\r\n        { note: 'C#3/Db3', frequency: 138.59 },\r\n        { note: 'D3', frequency: 146.83 },\r\n        { note: 'D#3/Eb3', frequency: 155.56 },\r\n        { note: 'E3', frequency: 164.81 },\r\n        { note: 'F3', frequency: 174.61 },\r\n        { note: 'F#3/Gb3', frequency: 185.00 },\r\n        { note: 'G3', frequency: 196.00 },\r\n        { note: 'G#3/Ab3', frequency: 207.65 },\r\n        { note: 'A3', frequency: 220.00 },\r\n        { note: 'A#3/Bb3', frequency: 233.08 },\r\n        { note: 'B3', frequency: 246.94 },\r\n        { note: 'C4', frequency: 261.63 },\r\n        { note: 'C#4/Db4', frequency: 277.18 },\r\n        { note: 'D4', frequency: 293.66 },\r\n        { note: 'D#4/Eb4', frequency: 311.13 },\r\n        { note: 'E4', frequency: 329.63 },\r\n        { note: 'F4', frequency: 349.23 },\r\n        { note: 'F#4/Gb4', frequency: 369.99 },\r\n        { note: 'G4', frequency: 392.00 },\r\n        { note: 'G#4/Ab4', frequency: 415.30 },\r\n        { note: 'A4', frequency: 440.00 },\r\n        { note: 'A#4/Bb4', frequency: 466.16 },\r\n        { note: 'B4', frequency: 493.88 },\r\n        { note: 'C5', frequency: 523.25 },\r\n        { note: 'C#5/Db5', frequency: 554.37 },\r\n        { note: 'D5', frequency: 587.33 },\r\n        { note: 'D#5/Eb5', frequency: 622.25 },\r\n        { note: 'E5', frequency: 659.25 },\r\n        { note: 'F5', frequency: 698.46 },\r\n        { note: 'F#5/Gb5', frequency: 739.99 },\r\n        { note: 'G5', frequency: 783.99 },\r\n        { note: 'G#5/Ab5', frequency: 830.61 },\r\n        { note: 'A5', frequency: 880.00 },\r\n        { note: 'A#5/Bb5', frequency: 932.33 },\r\n        { note: 'B5', frequency: 987.77 },\r\n        { note: 'C6', frequency: 1046.50 },\r\n        { note: 'C#6/Db6', frequency: 1108.73 },\r\n        { note: 'D6', frequency: 1174.66 },\r\n        { note: 'D#6/Eb6', frequency: 1244.51 },\r\n        { note: 'E6', frequency: 1318.51 },\r\n        { note: 'F6', frequency: 1396.91 },\r\n        { note: 'F#6/Gb6', frequency: 1479.98 },\r\n        { note: 'G6', frequency: 1567.98 },\r\n        { note: 'G#6/Ab6', frequency: 1661.22 },\r\n        { note: 'A6', frequency: 1760.00 },\r\n        { note: 'A#6/Bb6', frequency: 1864.66 },\r\n        { note: 'B6', frequency: 1975.53 },\r\n        { note: 'C7', frequency: 2093.00 },\r\n        { note: 'C#7/Db7', frequency: 2217.46 },\r\n        { note: 'D7', frequency: 2349.32 },\r\n        { note: 'D#7/Eb7', frequency: 2489.02 },\r\n        { note: 'E7', frequency: 2637.02 },\r\n        { note: 'F7', frequency: 2793.83 },\r\n        { note: 'F#7/Gb7', frequency: 2959.96 },\r\n        { note: 'G7', frequency: 3135.96 },\r\n        { note: 'G#7/Ab7', frequency: 3322.44 },\r\n        { note: 'A7', frequency: 3520.00 },\r\n        { note: 'A#7/Bb7', frequency: 3729.31 },\r\n        { note: 'B7', frequency: 3951.07 },\r\n        { note: 'C8', frequency: 4186.01 },\r\n        { note: 'C#8/Db8', frequency: 4434.92 },\r\n        { note: 'D8', frequency: 4698.63 },\r\n        { note: 'D#8/Eb8', frequency: 4978.03 },\r\n        { note: 'E8', frequency: 5274.04 },\r\n        { note: 'F8', frequency: 5587.65 },\r\n        { note: 'F#8/Gb8', frequency: 5919.91 },\r\n        { note: 'G8', frequency: 6271.93 },\r\n        { note: 'G#8/Ab8', frequency: 6644.88 },\r\n        { note: 'A8', frequency: 7040.00 },\r\n        { note: 'A#8/Bb8', frequency: 7458.62 },\r\n        { note: 'B8', frequency: 7902.13 },\r\n    ]\r\n}","import { Raycaster, Vector3, Object3D, Plane, Ray, Intersection, MOUSE, PerspectiveCamera, OrthographicCamera, Scene } from 'three'\r\nimport { Theremin3D } from './theremin/theremin3D'\r\nimport { SceneManager } from './scene-manager'\r\nimport { Note3D } from './theremin/note3D'\r\nimport { Theremin } from './theremin/theremin'\r\n\r\nexport class ObjectControl {\r\n\r\n    private static theremin3D: Theremin3D\r\n\r\n    public static selectedObjs: Object3D[] = []\r\n    public static selected: Note3D\r\n    public static _selectedObj: Object3D\r\n\r\n    private mouseDown: boolean\r\n    public dragObj: boolean = false\r\n    private mouse: Vector3\r\n\r\n    private raycaster: Raycaster\r\n    private ip: Vector3\r\n    private offset: Vector3\r\n    private moveTo: Vector3\r\n    private plane: Plane\r\n\r\n    private keyMap: Map<string, boolean> = new Map()\r\n    private XKey: boolean\r\n    private YKey: boolean\r\n    private ZKey: boolean\r\n    \r\n    constructor(_theremin3D: Theremin3D) {\r\n\r\n        ObjectControl.theremin3D = _theremin3D\r\n\r\n        this.mouseDown = false\r\n        this.mouse = new Vector3()\r\n        this.ip = new Vector3()\r\n        this.offset = new Vector3()\r\n        this.moveTo = new Vector3()\r\n        this.raycaster = new Raycaster()\r\n        \r\n        this.plane = new Plane(new Vector3(0, 1, 0), 0)\r\n\r\n        SceneManager.renderer.domElement.addEventListener('mousedown', this.onMouseDown.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('mouseup', this.onMouseUp.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('mousemove', this.onMouseMove.bind(this), false)\r\n\r\n        // document.addEventListener('mouseleave', this.onLeaveContainer.bind(this), false)\r\n\r\n        SceneManager.renderer.domElement.addEventListener('touchstart', this.onTouchStart.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('touchend', this.onTouchEnd.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('touchcancel', this.onTouchCancel.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('touchmove', this.onTouchMove.bind(this), false)\r\n        \r\n        SceneManager.renderer.domElement.addEventListener('keyup', this.onKeyUp.bind(this), false)\r\n        SceneManager.renderer.domElement.addEventListener('keydown', this.onKeyDown.bind(this), false)\r\n    }\r\n\r\n\r\n    public static get selectedObj() { return ObjectControl._selectedObj }\r\n    public static set selectedObj(obj: Object3D) {\r\n\r\n        if(obj != null && obj != undefined) {\r\n\r\n            if(ObjectControl._selectedObj != obj && ObjectControl.selected) {\r\n\r\n                ObjectControl.selected.unselect()\r\n            }\r\n\r\n            ObjectControl._selectedObj = obj\r\n\r\n            switch(obj.name) {\r\n\r\n                case 'osc.3D':\r\n                case 'chord.3D':\r\n\r\n                    ObjectControl.selected = ObjectControl.theremin3D.getNoteByObj(obj)\r\n\r\n                    break\r\n\r\n                default:\r\n\r\n                    if(obj.parent instanceof Scene) {\r\n\r\n                        ObjectControl.selectedObj = null\r\n                    }\r\n                    else {\r\n                        \r\n                        ObjectControl.selectedObj = obj.parent\r\n\r\n                        return\r\n                    } \r\n            }\r\n\r\n            if(ObjectControl.selected) \r\n                ObjectControl.selected.select()\r\n            else ObjectControl._selectedObj = null\r\n        }\r\n        else {\r\n\r\n            if(ObjectControl.selected != null && ObjectControl.selected != undefined) {\r\n\r\n                ObjectControl.selected.unselect()\r\n                ObjectControl.selected = null\r\n            }\r\n\r\n            ObjectControl._selectedObj = null\r\n        }\r\n    }\r\n\r\n\r\n    private collectRaycastObjs() {\r\n        \r\n        let objs: Object3D[] = []\r\n        ObjectControl.theremin3D.notes3D.forEach(note => {\r\n\r\n            objs.push(note.obj)\r\n        })\r\n\r\n        return objs\r\n    }\r\n\r\n    // ON KEY DOWN SWITCH NOTE/CHORD TO OLD POSITION WHEN CLICKED\r\n    // ON KEY UP SWITCH BACK TO CURRENT POSITION\r\n\r\n\r\n    // EVENTS\r\n    public onMouseDown(event) {\r\n        // console.log(event)\r\n        this.mouseDown = true\r\n\r\n        this.mouse.x = (event.clientX / SceneManager.w) * 2 - 1\r\n        this.mouse.y = -(event.clientY / SceneManager.h) * 2 + 1\r\n        \r\n        let vector = new Vector3(this.mouse.x, this.mouse.y, .5)\r\n        vector.unproject(SceneManager.currentCamera)\r\n\r\n        this.raycaster.setFromCamera(this.mouse, SceneManager.currentCamera)\r\n\r\n        let intersects = this.raycaster.intersectObjects(this.collectRaycastObjs(), true)\r\n\r\n        if(intersects.length > 0) {\r\n\r\n            SceneManager.orbit.enabled = false\r\n\r\n            if(intersects[0].object) {\r\n\r\n                ObjectControl.selectedObj = intersects[0].object\r\n\r\n                if(ObjectControl.selected) {\r\n\r\n                    this.dragObj = true\r\n\r\n                    // If no shift key\r\n                    if(!event.shiftKey) {\r\n\r\n                        ObjectControl.selectedObjs.forEach(obj => { ObjectControl.theremin3D.getNoteByObj(obj).unselect() })\r\n                        ObjectControl.selectedObjs = []\r\n                        ObjectControl.selectedObjs.push(intersects[0].object)\r\n                        // console.log(intersects[0].object,this.theremin3D.getNoteByObj(intersects[0].object))\r\n    \r\n                        // console.log('no shift', this.selected)\r\n                        this.plane.setFromNormalAndCoplanarPoint(SceneManager.currentCamera.getWorldDirection(this.plane.normal) , intersects[0].object.position)\r\n\r\n                        this.raycaster.ray.intersectPlane(this.plane, this.ip)\r\n\r\n                        this.offset.copy(this.ip.sub(intersects[0].object.position))\r\n                        // init move so its not at (0, 0, 0)\r\n                        this.moveTo.copy(intersects[0].object.position)\r\n\r\n                        ObjectControl.selected.select()\r\n                    }\r\n                    else if(!ObjectControl.selectedObjs.includes(intersects[0].object)) {\r\n    \r\n                        ObjectControl.selectedObj = intersects[0].object\r\n    \r\n                        ObjectControl.selectedObjs.push(intersects[0].object)\r\n\r\n                        // Select all selected objs\r\n                        ObjectControl.selectedObjs.forEach(obj => { \r\n                             \r\n                            ObjectControl.theremin3D.getNoteByObj(obj).select()\r\n                        })\r\n                    }\r\n                }\r\n                else {\r\n\r\n                    ObjectControl.selectedObjs = []\r\n                }\r\n            }\r\n            else {\r\n                ObjectControl.selectedObjs = []\r\n                ObjectControl.selectedObj = null\r\n            }\r\n        }\r\n        else {\r\n            ObjectControl.selectedObjs = []\r\n            ObjectControl.selectedObj = null\r\n        }\r\n\r\n        // SceneSetup.instance.onMouseDown(event)\r\n        console.log('CURRENTLY SELECTED: ', ObjectControl.selectedObjs, '  Main: ', ObjectControl.selected)\r\n    }\r\n\r\n\r\n    public onMouseUp(event) {\r\n        \r\n        this.mouseDown = false\r\n\r\n        this.dragObj = false\r\n\r\n        SceneManager.orbit.enabled = true\r\n\r\n        if(!event.shiftKey) {\r\n\r\n            // this.selected = null\r\n            // this.selectedObjs = []\r\n        }\r\n\r\n        if(ObjectControl.selected) {\r\n\r\n            ObjectControl.selected.mouseUp()\r\n        }\r\n\r\n        if(ObjectControl.selectedObjs.length > 1) {\r\n\r\n        }\r\n\r\n        // SceneSetup.instance.onMouseUp(event)\r\n        \r\n    }\r\n\r\n    public onMouseMove(event) {\r\n        // event.preventDefault()\r\n\r\n        this.mouse.x = (event.clientX / SceneManager.w) * 2 - 1\r\n        this.mouse.y = -(event.clientY / SceneManager.h) * 2 + 1\r\n\r\n        this.raycaster.setFromCamera(this.mouse, SceneManager.currentCamera)\r\n\r\n        if(this.mouseDown) {\r\n            \r\n            // When selected calc position\r\n            if (ObjectControl.selectedObjs.length == 1 && ObjectControl.selected) { // MULTIPLE? WHY length = 1\r\n\r\n                // HIDE MENU\r\n\r\n                this.raycaster.ray.intersectPlane(this.plane, this.ip)\r\n\r\n                this.moveTo.copy(this.ip.sub(this.offset))\r\n\r\n                // if(this.XKey) this.moveTo.x = this.moveTo.x\r\n                // if(Y || Y == undefined) tmpPos.y = (moveTo.y)\r\n                // if(Z || Z == undefined) tmpPos.z = (moveTo.z)\r\n\r\n                // Move SELECTED\r\n                Theremin3D.moveNote(ObjectControl.selected, this.moveTo)\r\n            }\r\n        }\r\n        else {\r\n\r\n            // HOVER OBJ\r\n            let intersects = this.raycaster.intersectObjects(ObjectControl.theremin3D.objs, true)\r\n    \r\n            if(intersects.length > 0) {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    private onTouchStart(event: TouchEvent) {\r\n\r\n        this.onMouseDown(event)\r\n    }\r\n    private onTouchEnd(event) {\r\n        \r\n        this.onMouseUp(event)\r\n    }\r\n    private onTouchCancel(event) {\r\n        \r\n        this.onMouseUp(event)\r\n    }\r\n    private onTouchMove(event) {\r\n        \r\n        this.onMouseMove(event)\r\n    }\r\n\r\n    private onLeaveContainer() {\r\n\r\n        console.log('left')\r\n        ObjectControl.selected = null\r\n\r\n        this.mouseDown = false\r\n    }\r\n\r\n    // onkeydown = onkeyup = {\r\n    //     e = e || event; // to deal with IE\r\n    //     map[e.keyCode] = e.type == 'keydown';\r\n    //     /* insert conditional here */\r\n    // }\r\n\r\n    public onKeyDown(e: KeyboardEvent) {\r\n\r\n        // MAKE POSSIBLE TO CLICK TWO KEYS e.g. X AND Y AND DONT CHANGE Z \r\n        const key = e.key.toLowerCase()\r\n\r\n        if(key == 'x' || key == 'y' || key == 'z' || key == '<') {\r\n            \r\n            this.XKey = false\r\n            this.YKey = false\r\n            this.ZKey = false\r\n            \r\n            this.keyMap.set(key, e.type == 'keydown')\r\n\r\n            if(this.keyMap.get('x')) {\r\n\r\n                this.XKey = true\r\n            }\r\n            if(this.keyMap.get('y')) {\r\n                \r\n                this.YKey = true\r\n            }\r\n            if(this.keyMap.get('z') || this.keyMap.get('<')) {\r\n\r\n                this.ZKey = true\r\n            }\r\n        }\r\n    }\r\n\r\n    public onKeyUp(e) {\r\n\r\n        const key = e.key.toLowerCase()\r\n\r\n        if(key == 'x' || key == 'y' || key == 'z' || key == '<') {\r\n        \r\n            this.keyMap.set(key, e.type == 'keydown')\r\n\r\n            if(this.keyMap.get('x') && this.keyMap.get('y') || \r\n                this.keyMap.get('x') && (this.keyMap.get('z') || this.keyMap.get('<')) || \r\n                this.keyMap.get('y') && (this.keyMap.get('z') || this.keyMap.get('<')) ||\r\n                this.keyMap.get('x') && this.keyMap.get('y') && (this.keyMap.get('z') || this.keyMap.get('<'))) {\r\n                \r\n                if(this.keyMap.get(key)) {\r\n\r\n                    this.XKey = false\r\n                }\r\n            }\r\n            else {\r\n                \r\n                this.XKey = true\r\n                this.YKey = true\r\n                this.ZKey = true\r\n            }\r\n        }\r\n    }\r\n\r\n    onResize() {\r\n\r\n    }\r\n}","import * as THREE from 'three'\r\n\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader'\r\nimport { CopyShader } from 'three/examples/jsm/shaders/CopyShader'\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\r\nimport { GridHelper, Line, AxesHelper, Vector3, PerspectiveCamera, OrthographicCamera } from 'three'\r\nimport { ObjectControl } from './object-control'\r\nimport { Theremin } from './theremin/theremin'\r\nimport { Theremin3D } from './theremin/theremin3D'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\nimport { Color } from './color'\r\n\r\n\r\nexport enum CameraType {\r\n\r\n    PERSPECTIVE,\r\n    ORTHOGRAPHIC\r\n}\r\n\r\nexport class SceneManager {\r\n\r\n    public container: HTMLElement\r\n\r\n    public static renderer: THREE.WebGLRenderer\r\n    public static perspective: THREE.PerspectiveCamera\r\n    public static orthographic: THREE.OrthographicCamera\r\n    public static scene: THREE.Scene\r\n    public static orbit: OrbitControls\r\n\r\n    public static activeCamera: CameraType\r\n\r\n    public composer: EffectComposer\r\n    public renderPass: RenderPass\r\n    public effectFXAA: ShaderPass\r\n    public copyShader: ShaderPass\r\n    public vertexShader: string\r\n    public fragmentShader: string\r\n\r\n    public id: number\r\n\r\n    public static w:number\r\n    public static h:number\r\n\r\n    public static environmentObjs: THREE.Object3D[] = []\r\n    public sphere: THREE.Mesh\r\n    public xyPlane: THREE.Mesh\r\n    public yzPlane: THREE.Mesh\r\n    public xzPlane: THREE.Mesh\r\n\r\n    public x: THREE.Line\r\n    public y: THREE.Line\r\n    public z: THREE.Line\r\n\r\n\r\n    constructor(container: HTMLElement) {\r\n\r\n        this.container = container\r\n\r\n        SceneManager.w = window.innerWidth\r\n        SceneManager.h = window.innerHeight\r\n\r\n        SceneManager.activeCamera = CameraType.PERSPECTIVE\r\n\r\n        SceneManager.renderer = new THREE.WebGLRenderer({ antialias: true })\r\n        SceneManager.renderer.setSize(SceneManager.w, SceneManager.h)\r\n        SceneManager.renderer.setClearColor(Color.BG)\r\n        SceneManager.renderer.toneMapping = THREE.Uncharted2ToneMapping\r\n        this.container.append(SceneManager.renderer.domElement)\r\n\r\n        SceneManager.perspective = new THREE.PerspectiveCamera(50, SceneManager.w / SceneManager.h, .1, 10000)\r\n        SceneManager.perspective.position.set(50, 50, 50)\r\n\r\n        SceneManager.orthographic = new THREE.OrthographicCamera(SceneManager.w / -2, SceneManager.w / 2, SceneManager.h / 2, SceneManager.h / -2, .1, 1000)\r\n        SceneManager.orthographic.position.set(0, 0, 5)\r\n        SceneManager.orthographic.zoom = 50\r\n\r\n        SceneManager.scene = new THREE.Scene()\r\n        SceneManager.scene.background = new THREE.Color(Color.BG)\r\n        // this.scene.add(new GridHelper(1000, 100, new THREE.Color(0xAAAAAA)))\r\n        // this.scene.add(new AxesHelper(100))\r\n\r\n        SceneManager.orbitCamera = SceneManager.perspective\r\n\r\n        this.createAxes()\r\n        this.createLight()\r\n\r\n        // this.addCubeMap()\r\n    }\r\n\r\n    public static get currentCamera(){\r\n\r\n        return this.activeCamera == CameraType.PERSPECTIVE ? SceneManager.perspective : SceneManager.orthographic\r\n    }\r\n\r\n    \r\n    public static set orbitCamera(camera: THREE.Camera) { \r\n\r\n        if(SceneManager.orbit) {\r\n\r\n            SceneManager.orbit.reset()\r\n            SceneManager.orbit.dispose()\r\n        }\r\n        \r\n        if(camera instanceof PerspectiveCamera){\r\n            SceneManager.orbit = new OrbitControls(camera, SceneManager.renderer.domElement)\r\n            SceneManager.orbit.enableDamping = true\r\n            SceneManager.orbit.dampingFactor = .2\r\n        }\r\n        else if(camera instanceof OrthographicCamera) {\r\n            SceneManager.orbit = new OrbitControls(camera, SceneManager.renderer.domElement)\r\n            SceneManager.orbit.enableDamping = true\r\n            SceneManager.orbit.dampingFactor = .2\r\n            SceneManager.orbit.enableRotate = false\r\n        }\r\n    }\r\n\r\n    private createAxes() {\r\n\r\n        let points: THREE.Vector3[] = []\r\n\r\n        // X\r\n        points.push(new THREE.Vector3(-10000, 0, 0))\r\n        points.push(new THREE.Vector3(10000, 0, 0))\r\n        let geometry = new THREE.BufferGeometry().setFromPoints(points)\r\n        let material = new THREE.LineBasicMaterial( { color: Color.X } )\r\n        this.x = new THREE.Line( geometry, material )\r\n        this.x.position.set(0, 0, 0)\r\n        SceneManager.scene.add(this.x)\r\n        \r\n        // Y\r\n        points = []\r\n        points.push(new THREE.Vector3(0, -10000, 0))\r\n        points.push(new THREE.Vector3(0, 10000, 0))\r\n        geometry = new THREE.BufferGeometry().setFromPoints(points)\r\n        material = new THREE.LineBasicMaterial( { color: Color.Y } )\r\n        this.y = new THREE.Line( geometry, material )\r\n        this.y.position.set(0, 0, 0)\r\n        SceneManager.scene.add(this.y)\r\n\r\n        // Z\r\n        points = []\r\n        points.push(new THREE.Vector3(0, 0, -10000))\r\n        points.push(new THREE.Vector3(0, 0, 10000))\r\n        geometry = new THREE.BufferGeometry().setFromPoints(points)\r\n        material = new THREE.LineBasicMaterial( { color: Color.Z } )\r\n        this.z = new THREE.Line( geometry, material )\r\n        this.z.position.set(0, 0, 0)\r\n        SceneManager.scene.add(this.z)\r\n    }\r\n    \r\n        \r\n\r\n    private createLight() {\r\n\r\n        let hemi = new THREE.HemisphereLight(0xFFFdEF, 0xFFFedF, .8)\r\n        SceneManager.scene.add(hemi)\r\n    }\r\n\r\n    private addCubeMap() {\r\n\r\n        SceneManager.scene.background = new THREE.CubeTextureLoader()\r\n            .setPath( '/assets/images/milky-way/' )\r\n            .load( [\r\n                'px.png',\r\n                'nx.png',\r\n                'py.png',\r\n                'ny.png',\r\n                'pz.png',\r\n                'nz.png'\r\n            ] );\r\n    }\r\n\r\n    public update() {\r\n\r\n        if(SceneManager.orbit) SceneManager.orbit.update()\r\n        \r\n        if(SceneManager.activeCamera == CameraType.PERSPECTIVE) \r\n            SceneManager.renderer.render(SceneManager.scene, SceneManager.perspective)\r\n        else if(SceneManager.activeCamera == CameraType.ORTHOGRAPHIC)  \r\n            SceneManager.renderer.render(SceneManager.scene, SceneManager.orthographic)\r\n\r\n        // console.log(Theremin.instance.sounds, Theremin3D.instance.sounds3D)\r\n\r\n    }\r\n\r\n    public distanceToCenter(pos: Vector3) {\r\n\r\n        return pos.distanceTo(SceneManager.scene.position)\r\n    }\r\n\r\n    // ROTATE CAMERA ON KEY 1 2 3 or SHIFT 1 2 3 for negative area to be aligned to a axes\r\n    public rotateCamera(axis: string) {\r\n\r\n        if(axis == 'x') {\r\n\r\n            SceneManager.perspective.position.set(0, 0, this.distanceToCenter(SceneManager.perspective.position))\r\n        }\r\n        else if(axis == 'y') {\r\n\r\n            SceneManager.perspective.position.set(this.distanceToCenter(SceneManager.perspective.position), 0, 0)\r\n        }\r\n        else if(axis == 'z') {\r\n\r\n            SceneManager.perspective.position.set(this.distanceToCenter(SceneManager.perspective.position), 0, 0)\r\n        }\r\n    }\r\n\r\n\r\n    resize() {\r\n\r\n        SceneManager.w = this.container.clientWidth\r\n        SceneManager.h = this.container.clientHeight\r\n\r\n        SceneManager.perspective.aspect = SceneManager.w / SceneManager.h\r\n        SceneManager.perspective.updateProjectionMatrix()\r\n\r\n        SceneManager.renderer.setPixelRatio(SceneManager.w / SceneManager.h)\r\n        SceneManager.renderer.setSize(SceneManager.w, SceneManager.h)\r\n    }\r\n}","import { Component, AfterViewInit, OnDestroy, Input } from '@angular/core';\r\n\r\nimport { ObjectControl } from '../object-control';\r\nimport { Theremin3D } from '../theremin/theremin3D';\r\nimport { Note } from '../theremin/note';\r\nimport { Note3D } from '../theremin/note3D';\r\n\r\n\r\n@Component({\r\n  selector: 'selected-menu',\r\n  templateUrl: './selected.component.html',\r\n  styles: [\r\n    `\r\n    :host {\r\n        \r\n        display:block;    \r\n        width: 100%;\r\n        height: auto;\r\n        color: #fefefe;\r\n    \r\n        resize: vertical;\r\n        overflow: auto;\r\n    }\r\n    `\r\n  ]\r\n})\r\nexport class Selected implements AfterViewInit {\r\n\r\n  @Input('theremin3D') theremin3D: Theremin3D\r\n\r\n  public get selected() { return ObjectControl.selected }\r\n  public get selectedObjs() { return ObjectControl.selectedObjs }\r\n\r\n  public get isNote() { return this.selected instanceof Note3D }\r\n\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n\r\n\r\n  }\r\n\r\n  private isSelected(type: string) {\r\n\r\n    if(ObjectControl.selected && ObjectControl.selected != null)\r\n        return true\r\n    else return false\r\n  }\r\n\r\n  public changeVolume() {\r\n\r\n  }\r\n\r\n  public setWave(wave: OscillatorType) {\r\n\r\n    (this.selected.ctrl as Note).wave = wave\r\n  }\r\n\r\n  public toggleMuteSelected() {\r\n\r\n    if(ObjectControl.selected.ctrl.muted)\r\n      ObjectControl.selected.unmute()\r\n    else ObjectControl.selected.mute()\r\n    \r\n  }\r\n\r\n\r\n  public groupSoundEntities() {\r\n\r\n    // let ses: Sound[] = []\r\n    // let ses3D: Sound3D[] = []\r\n    // ObjectControl.selectedObjs.forEach(obj => {\r\n\r\n    //   // Collect all selected Sounds\r\n    //   ses.push(this.theremin3D.getNoteByObj(obj).ctrl)\r\n    //   // Collect all selected Sound3D's\r\n    //   ses3D.push(this.theremin3D.getNoteByObj(obj))\r\n    // })\r\n\r\n    // // Make Chord from Sounds\r\n    // let chord = this.theremin3D.theremin.groupNotesToChord(ses)\r\n\r\n    // // Add 3D objs to new Chord3D obj\r\n    // this.theremin3D.groupNotesToChord(chord, ses3D)\r\n  }\r\n\r\n  public ungroupSoundEntities() {\r\n\r\n    // let ses: Sound[] = []\r\n    // let ses3D: Sound3D[] = []\r\n    // ObjectControl.selectedObjs.forEach(obj => {\r\n\r\n    //   ses3D.push(this.theremin3D.getNoteByObj(obj))\r\n    //   ses.push(this.theremin3D.getNoteByObj(obj).ctrl)\r\n    // })\r\n\r\n    // let chord = this.theremin3D.theremin.ungroupNotes(ses)\r\n\r\n    // this.theremin3D.ungroupNotes(ses3D, chord)\r\n  }\r\n}","\r\n<div id=\"selected-menu\" *ngIf=\"selected\">\r\n\r\n    <div>\r\n        <div> {{ selected.ctrl.type + ' id:' + selected.ctrl.id }}</div>\r\n\r\n        <label for=\"wave\">Wave</label>\r\n        <select *ngIf=\"isNote\" id=\"wave\" name=\"wave\" (change)=\"setWave($event.target.value)\">\r\n            <option value=\"sine\">Sine</option>\r\n            <option value=\"square\">Square</option>\r\n            <option value=\"sawtooth\">Sawtooth</option>\r\n            <option value=\"triangle\">Triangle</option>\r\n        </select>\r\n\r\n\r\n<!-- \r\n        <label for=\"volume\">Volume {{ selectedVolume }}</label>\r\n        <input type=\"range\" min=\"0\" max=\"1\" step=\".01\" class=\"slider\" id=\"volume\" name=\"volume\" [(ngModel)]=\"selectedVolume\">\r\n        \r\n        <label for=\"frequency\">Frequency: {{ selectedFrequency }}</label>\r\n        <input type=\"range\" min=\"0\" max=\"1000\" value=\"50\" class=\"slider\" id=\"frequency\" name=\"frequency\" [(ngModel)]=\"selectedFrequency\"> -->\r\n        \r\n        <!--<label for=\"attack\">Attack</label>\r\n        <input type=\"range\" min=\"0\" max=\"100\" value=\"50\" class=\"slider\" id=\"attack\" name=\"attack\" [(ngModel)]=\"attack\">\r\n        \r\n        <label for=\"release\">Release</label>\r\n        <input type=\"range\" min=\"0\" max=\"100\" value=\"50\" class=\"slider\" id=\"release\" name=\"release\" [(ngModel)]=\"release\">\r\n        \r\n        <label for=\"sustain\">Sustain</label>\r\n        <input type=\"range\" min=\"0\" max=\"100\" value=\"50\" class=\"slider\" id=\"sustain\" name=\"sustain\" [(ngModel)]=\"sustain\">\r\n\r\n        <label for=\"affectedByTact\">Affected by tact</label>\r\n        <input type=\"checkbox\" name=\"affectedByTact\"/>\r\n\r\n        <label for=\"stakato\">Stakato</label>\r\n        <input type=\"checkbox\" name=\"stakato\"/>-->\r\n            \r\n        <span *ngIf=\"false\">Part of chord </span>\r\n        \r\n        <button (click)=\"toggleMuteSelected()\">Mute/Unmute</button>\r\n\r\n\r\n    </div>\r\n\r\n\r\n    <div *ngIf=\"selectedObjs.length > 1\">\r\n        Alarm: A Note is already part of chord...\r\n        <button (click)=\"groupSoundEntities()\">Group</button>\r\n\r\n        <button>Ungroup</button>\r\n    </div>\r\n\r\n</div>\r\n","\r\nexport class Storage {\r\n\r\n  public static baseName: string = \"etherphone\";\r\n\r\n  public static load(): string {\r\n    return window.localStorage.getItem(Storage.baseName + \"-save\");\r\n  }\r\n\r\n  public static save(file: string) {\r\n    window.localStorage.setItem(Storage.baseName + \"-save\", file);\r\n  }\r\n}\r\n","\r\n\r\nexport enum Axis {\r\n\r\n    x = 'x',\r\n    y = 'y',\r\n    z = 'z'    \r\n}","import { Vector3, Color } from 'three'\r\nimport { Theremin } from './theremin'\r\nimport * as Tone from 'tone'\r\nimport { Tools } from '../tools/tools'\r\n\r\nexport class Note{\r\n    \r\n    public id: number\r\n    public type: string\r\n\r\n    public gain: Tone.Gain\r\n    public osc: Tone.Oscillator\r\n    public _frequency: number\r\n    public _wave: OscillatorType\r\n    private _volume: number\r\n\r\n    public isPlaying: boolean = false\r\n    public muted: boolean = false\r\n\r\n    public color: Color\r\n\r\n    public position: Vector3\r\n\r\n    public get frequency() { return this._frequency }\r\n    public set frequency(val) { \r\n\r\n        if(val == null) return\r\n\r\n        this._frequency = Math.abs(val)\r\n\r\n        this.osc.frequency.setValueAtTime(this._frequency, Tone.context.currentTime)\r\n    }\r\n\r\n    public get volume() : number { return this._volume }\r\n    public set volume(val: number) {\r\n        if(val == null) return\r\n\r\n        this._volume = Math.abs(val)\r\n\r\n        this.gain.gain.value = val\r\n    }\r\n\r\n    public get wave() : OscillatorType { return this._wave }\r\n    public set wave(val: OscillatorType) { \r\n        this._wave = val\r\n        if(val && this.osc) this.osc.type = this._wave\r\n    }\r\n\r\n    constructor() {\r\n\r\n        this.id = Tools.getUniqueID()\r\n        this.type = 'note'\r\n        this.color = new Color().setHSL( Math.random(), 0.7, Math.random() * 0.2 + 0.05 );\r\n\r\n        this.gain = new Tone.Gain()\r\n        this.volume = 0\r\n        this.gain.connect(Theremin.masterVolume)\r\n\r\n        this.osc = new Tone.Oscillator(this.frequency)\r\n        this.osc.connect(this.gain)\r\n        this.frequency = 0\r\n\r\n        this.position = new Vector3(0, 0, 0)\r\n    }\r\n\r\n    public update() {\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    // public createOsc() {\r\n\r\n    //     this.gainNode = this.audioContext.createGain()\r\n\r\n    //     this.osc = this.audioContext.createOscillator()\r\n    //     this.osc.type = 'sine'\r\n    //     this.osc.connect(this.gainNode)\r\n    //     this.gainNode.connect(this.audioContext.destination)\r\n\r\n    //     this.osc.frequency.value = this._frequency\r\n\r\n    //     this.volume = this.volume\r\n\r\n    //     this.position = new Vector3(_frequency / Theremin.instance.X.sF, this.volume * Theremin.instance.Y.sF, 0)\r\n    // }\r\n\r\n    public destroy() {\r\n\r\n        // this.gainNode.gain.setValueAtTime(this.gainNode.gain.value, this.audioContext.currentTime)\r\n\r\n        // this.gainNode.gain.exponentialRampToValueAtTime(.0000001, length + .03)\r\n\r\n        window.setTimeout(()=> {\r\n\r\n            this.osc.disconnect()\r\n            this.osc = null\r\n        }, 40)\r\n\r\n\r\n\r\n        this.wave = null\r\n        this._volume = null\r\n        this.color = null\r\n        this.position = null\r\n        this.type = null\r\n        this.id = null\r\n        this.isPlaying = null\r\n        this.muted = null\r\n    }\r\n    \r\n    public play(length?: number) {\r\n\r\n        this.isPlaying = true\r\n\r\n        this.osc.stop(Tone.context.currentTime)\r\n        this.osc.start(Tone.context.currentTime)\r\n\r\n        // let convolver = reverb()\r\n\r\n        // this.osc.connect(convolver)\r\n\r\n        // this.gainNode.gain.setValueAtTime(this.gainNode.gain.value, this.audioContext.currentTime)\r\n\r\n        // this.gainNode.gain.exponentialRampToValueAtTime(.0001, length + .03)\r\n\r\n        // this.osc.stop(Tone.context.currentTime + length + .03)\r\n\r\n        if(length != undefined)\r\n            this.osc.stop(Tone.context.currentTime + length)\r\n    }\r\n\r\n    public stop() {\r\n\r\n        this.isPlaying = false\r\n\r\n        if(!this.osc) return\r\n\r\n        // this.gainNode.gain.setValueAtTime(this.gainNode.gain.value, this.audioContext.currentTime)\r\n\r\n        // this.gainNode.gain.exponentialRampToValueAtTime(.0001, this.audioContext.currentTime + .03)\r\n\r\n        this.osc.stop(Tone.context.currentTime + .03)\r\n    }\r\n    \r\n    public mute() {\r\n\r\n        this.muted = true\r\n    }\r\n\r\n    public addReverb() {\r\n\r\n    }\r\n\r\n    public unmute() {\r\n\r\n        this.muted = false\r\n\r\n        this.gain.gain.setValueAtTime(this._volume, Tone.context.currentTime)\r\n    }\r\n\r\n    public serializeOut() {\r\n\r\n        return {\r\n            id: this.id,\r\n            color: this.color.getHex(),\r\n            frequency: this.frequency,\r\n            volume: this.volume,\r\n            wave: this.wave,\r\n        }\r\n    }\r\n\r\n    public serializeIn(obj: {}) {\r\n        console.log('obj', obj)\r\n        this.id = obj['id']\r\n        this.color.setHex(obj['color'])\r\n        this.frequency = obj['frequency']\r\n        this.volume = obj['volume']\r\n        // this.wave = obj['wave']\r\n    }\r\n}","import { Mesh, SphereBufferGeometry, MeshNormalMaterial, Vector3, MeshBasicMaterial, Color, Object3D, MeshStandardMaterial, ShaderMaterial, Clock } from 'three'\r\nimport { Note } from './note'\r\nimport { DistanceLabel } from '../tools/labels/distance-label'\r\nimport { MemoryLabel } from '../tools/labels/memory-label'\r\nimport { AxesLabel } from '../tools/labels/axes-label'\r\nimport { Tools } from '../tools/tools'\r\nimport { LoadingManager } from '../tools/loading-manager'\r\n\r\nimport { FragmentShader } from '../shaders/fragment-shaders'\r\nimport { VertexShader } from '../shaders/vertex-shaders'\r\nimport * as Tone from 'tone'\r\n\r\n\r\nexport class Note3D{\r\n\r\n    public ctrl: Note\r\n    public obj: Mesh\r\n\r\n    public distanceLabel: DistanceLabel\r\n    public memoryLabel: MemoryLabel\r\n    public axesLabel: AxesLabel\r\n\r\n    public get position() { return this.obj.position }\r\n    public set position(val:Vector3) { \r\n\r\n        if(val == null) return\r\n\r\n        this.obj.position.copy(val)\r\n    }\r\n\r\n\r\n\r\n    constructor(note: Note) {\r\n\r\n        this.ctrl = note\r\n\r\n\r\n        this.obj = new Mesh(\r\n            new SphereBufferGeometry(2, 20, 20), \r\n            new MeshStandardMaterial({\r\n                color: this.ctrl.color,\r\n            })\r\n        )\r\n        this.obj.name = 'osc.3D'\r\n        this.obj.userData.id = note.id\r\n\r\n        this.position = new Vector3()\r\n\r\n        this.distanceLabel = new DistanceLabel(this)\r\n        this.memoryLabel = new MemoryLabel(this)\r\n        this.axesLabel = new AxesLabel(this)\r\n        \r\n        this.distanceLabel.enabled = false\r\n        this.memoryLabel.enabled = false\r\n        this.axesLabel.enabled = true\r\n\r\n        \r\n        // LoadingManager.loadGLTF('/assets/models/shape.glb', (gltf)=> {\r\n            \r\n        //     const uniform = {\r\n        //         uColor : {\r\n        //             value: new Color(1, 1, 0)\r\n        //         },\r\n        //         time: {\r\n        //             type: 'f',\r\n        //             value: Tone.context.currentTime\r\n        //         }\r\n        //     }\r\n\r\n        //     this.obj.geometry = gltf.children[0].geometry\r\n        //     this.obj.material = new ShaderMaterial({\r\n        //         // wireframe: true,\r\n        //         uniforms: uniform,\r\n        //         vertexShader: VertexShader.distortion,\r\n        //         fragmentShader: FragmentShader.meshbasicmaterial\r\n        //     })\r\n        // })\r\n\r\n\r\n        this.move(this.ctrl.position)\r\n    }\r\n\r\n    public update() {\r\n\r\n        this.move(this.ctrl.position)\r\n\r\n\r\n        this.distanceLabel.update()\r\n\r\n        this.memoryLabel.update()\r\n\r\n        this.axesLabel.update()\r\n\r\n        if(this.obj && this.obj.material['uniforms'])\r\n            this.obj.material['uniforms'].time.value = Tone.context.currentTime\r\n    }\r\n\r\n    public move(moveTo: Vector3) {\r\n\r\n        this.position = moveTo\r\n    }\r\n\r\n    public select() {\r\n\r\n        if(this.axesLabel.enabled) this.axesLabel.reset()\r\n    }\r\n    \r\n    public unselect() {\r\n\r\n    }\r\n\r\n    public play(length?: number) {\r\n\r\n        console.log('length', length * 1000)\r\n        this.obj.scale.set(2, 2, 2)\r\n\r\n        window.setTimeout(()=> {\r\n\r\n            this.obj.scale.set(1, 1, 1)\r\n\r\n        }, length * 1000)\r\n    }\r\n\r\n\r\n\r\n\r\n    public mouseUp() {\r\n        \r\n    }\r\n\r\n    public mute() {\r\n\r\n        this.ctrl.mute()\r\n    }\r\n\r\n    public unmute() {\r\n\r\n        this.ctrl.unmute()\r\n    }\r\n\r\n    \r\n    public destroy() {\r\n\r\n        if(this.distanceLabel) {\r\n            this.distanceLabel.enabled = false\r\n            this.distanceLabel = null\r\n        }\r\n        if(this.memoryLabel) {\r\n            this.memoryLabel.enabled = false\r\n            this.memoryLabel = null\r\n        }\r\n        if(this.axesLabel) {\r\n            this.axesLabel.enabled = false\r\n            this.axesLabel = null\r\n        }\r\n\r\n        Tools.dispose(this.obj)\r\n    }\r\n\r\n}","import { Component, Input, ElementRef } from '@angular/core'\r\nimport { ObjectControl } from '../object-control'\r\nimport { Axis } from './axis'\r\nimport { Theremin } from './theremin'\r\nimport { Theremin3D } from './theremin3D'\r\n\r\n\r\n@Component({\r\n    selector: 'theremin',\r\n    template: `\r\n\r\n        <div class=\"btn\" (click)=\"reset()\">New</div>\r\n\r\n        <div class=\"btn\" (click)=\"addOsc()\">Plus</div>\r\n\r\n        <!--<label for=\"x\">X</label>\r\n        <select name=\"x\">\r\n            <option *ngFor=\"let b of behaviours; let i = index\" value=\"i\">{{ b.name }}</option>\r\n        </select>\r\n        \r\n        <label for=\"y\">Y</label>\r\n        <select name=\"y\">\r\n            <option *ngFor=\"let b of behaviours; let i = index\" value=\"i\">{{ b.name }}</option>\r\n        </select>\r\n        \r\n        <label for=\"z\">Z</label>\r\n        <select name=\"z\">\r\n            <option *ngFor=\"let b of behaviours; let i = index\" value=\"i\">{{ b.name }}</option>\r\n        </select>-->\r\n        \r\n        <div class=\"btn b gap-r\" (click)=\"toggleMemoryLabel()\">Memory Label</div>\r\n        <div class=\"btn b gap-r\" (click)=\"toggleDistanceLabel()\">Distance Label</div>\r\n        <div class=\"btn b gap-r\" (click)=\"toggleAxesLabel()\">Axes Label</div>\r\n\r\n    `,\r\n    styles: [\r\n  \r\n        `\r\n        `\r\n    ]\r\n    \r\n  })\r\n  export class ThereminView {\r\n\r\n    @Input('theremin') public theremin: Theremin\r\n    @Input('theremin3D') public theremin3D: Theremin3D\r\n\r\n    private host: HTMLElement\r\n\r\n\r\n    constructor(private hostRef:ElementRef) {\r\n\r\n    this.host = this.hostRef.nativeElement\r\n\r\n    }\r\n\r\n    get behaviours() { return Theremin.axesBehaviours }\r\n\r\n    getBehaviourByAxis(axis: Axis) {\r\n\r\n    for(let b of Theremin.axesBehaviours) {\r\n\r\n        if(b.axis == axis) return b\r\n    }\r\n    }\r\n\r\n\r\n\r\n    ngAfterViewInit() {\r\n\r\n    }\r\n\r\n    public reset() {\r\n\r\n        this.theremin3D.reset()\r\n        this.theremin.reset()\r\n    }\r\n      \r\n    public addOsc(frequency?: number, cb?: Function) {\r\n\r\n        let note = this.theremin.addNote(frequency == undefined ? 100 : frequency)\r\n        let note3D = this.theremin3D.addNote3D(note)\r\n\r\n        if(cb) cb(note3D)\r\n    }\r\n\r\n\r\n        \r\n    public toggleAxesLabel() {\r\n\r\n        this.theremin3D.notes3D.forEach(note => {\r\n\r\n            note.axesLabel.enabled = !note.axesLabel.enabled\r\n            note.axesLabel.update()\r\n        })\r\n    }\r\n    \r\n    public toggleMemoryLabel() {\r\n\r\n        this.theremin3D.notes3D.forEach(note => {\r\n\r\n            note.memoryLabel.enabled = !note.memoryLabel.enabled\r\n            note.memoryLabel.update()\r\n        })\r\n    }\r\n    \r\n    public toggleDistanceLabel() {\r\n\r\n        this.theremin3D.notes3D.forEach(note => {\r\n\r\n            note.distanceLabel.enabled = !note.distanceLabel.enabled\r\n            note.distanceLabel.update()\r\n        })\r\n    }\r\n  } ","import { Note } from './note'\r\nimport { AxesBehaviour } from '../axes-behaviours/axes-behaviour'\r\nimport { FrequencyShift } from '../axes-behaviours/frequency-shfit'\r\nimport { VolumeShift } from '../axes-behaviours/volume-shift'\r\nimport { Octivator } from '../axes-behaviours/octivator'\r\nimport { AdditiveSynthesis } from '../axes-behaviours/additive-synthesis'\r\nimport { Axis } from './axis'\r\nimport { OctahedronBufferGeometry, Vector3 } from 'three'\r\nimport * as Tone from 'tone'\r\n\r\nexport class Theremin {\r\n\r\n    static instance: Theremin\r\n\r\n    static masterVolume: Tone.Gain\r\n    public storedVolume: number\r\n    public volume: number\r\n    private muted: boolean = false\r\n\r\n    public notes: Note[] = []\r\n\r\n    public static _x: AxesBehaviour\r\n    public static get x() { return Theremin._x }\r\n    public static set x(behaviour: AxesBehaviour) {\r\n\r\n        Theremin._x = behaviour\r\n        Theremin._x.axis = Axis.x\r\n    }\r\n\r\n    public static _y: AxesBehaviour\r\n    public static get y() { return Theremin._y }\r\n    public static set y(behaviour: AxesBehaviour) {\r\n\r\n        Theremin._y = behaviour\r\n        Theremin._y.axis = Axis.y\r\n    }\r\n    public static _z: AxesBehaviour\r\n    public static get z() { return Theremin._z }\r\n    public static set z(behaviour: AxesBehaviour) {\r\n\r\n        Theremin._z = behaviour\r\n        Theremin._z.axis = Axis.z\r\n    }\r\n\r\n\r\n\r\n    public static axesBehaviours: AxesBehaviour[] = []\r\n\r\n    public isPlaying: boolean = true\r\n\r\n\r\n    constructor() {\r\n\r\n        Theremin.instance = this\r\n\r\n        this.volume = .7\r\n\r\n        Theremin.masterVolume = new Tone.Gain(this.volume).toDestination()\r\n\r\n        this.storedVolume = Theremin.masterVolume.gain.value\r\n\r\n        Theremin.masterVolume.gain.value = this.volume\r\n\r\n        Theremin.x = new FrequencyShift()\r\n        Theremin.y = new VolumeShift()\r\n        Theremin.z = new Octivator()\r\n    }\r\n\r\n\r\n    public update() {\r\n\r\n        for(let note of this.notes) {\r\n\r\n            Theremin.computePosition(note)\r\n        }\r\n    }\r\n\r\n\r\n    public setAxisbehaviour(axis: string, behaviour: AxesBehaviour) {\r\n\r\n    }\r\n\r\n    public reset() {\r\n\r\n        let notes: Note[] = []\r\n\r\n        this.notes.forEach(note => { notes.push(note)})\r\n        notes.forEach(note => this.deleteNote(note))\r\n\r\n        this.notes = []\r\n        Theremin.masterVolume.gain.setValueAtTime(.8, Tone.context.currentTime)\r\n\r\n        Theremin.x = new FrequencyShift()\r\n        Theremin.y = new VolumeShift()\r\n        Theremin.z = new Octivator()\r\n    }\r\n\r\n    public addNote(frequency?: number) : Note {\r\n\r\n        let sn = new Note()\r\n\r\n        this.notes.push(sn)\r\n\r\n        sn.play()\r\n\r\n        return sn\r\n    }\r\n\r\n    public deleteNote(note: Note) : boolean {\r\n\r\n        if(!note) return false\r\n\r\n        let i = this.notes.indexOf(note)\r\n\r\n        if(i != -1) {\r\n\r\n            note.destroy()\r\n            this.notes.splice(i, 1)\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    public groupNotesToChord(_ses: Note[]) {\r\n\r\n        // let chord = new Chord(_ses)\r\n\r\n        // this.notes.push(chord)\r\n\r\n        // chord.notes.forEach(se => {\r\n\r\n        //     se.parent = chord\r\n\r\n        //     // if(se.parent) {\r\n        //     // }\r\n        // })\r\n\r\n        // return chord\r\n    }\r\n\r\n    public ungroupNotes(_ses: Note[]) {\r\n\r\n        return null\r\n    }\r\n\r\n    // public removeNoteFromChord(chord: Chord, note: Note) {\r\n\r\n    //     let i = chord.notes.indexOf(note)\r\n\r\n    //     if(i >= 0) chord.notes.splice(i, 1)\r\n        \r\n    //     this.notes.push(note)\r\n    // }\r\n\r\n    // public splitChord(chord: Chord) {\r\n\r\n    //     chord.notes.forEach(note => {\r\n\r\n    //         this.notes.push(note)\r\n    //     })\r\n    // }\r\n\r\n    \r\n    public static computePosition(note: Note) {\r\n\r\n        if(Theremin.x) Theremin.x.compute1DPosition(note)\r\n        if(Theremin.y) Theremin.y.compute1DPosition(note)\r\n        if(Theremin.z) Theremin.z.compute1DPosition(note)\r\n    }\r\n\r\n    public static computeFromPosition(note: Note, position: Vector3) {\r\n\r\n        if(Theremin.x) Theremin.x.processAlongDimension(note, position)\r\n        if(Theremin.y) Theremin.y.processAlongDimension(note, position)\r\n        if(Theremin.z) Theremin.z.processAlongDimension(note, position)\r\n    }\r\n\r\n    public mute() {\r\n\r\n        this.muted = true\r\n\r\n        Theremin.masterVolume.gain.setValueAtTime(0, Tone.context.currentTime)\r\n    }\r\n\r\n    public toggleOnOff(play?: boolean) {\r\n\r\n        if(play == undefined) play = !this.isPlaying\r\n\r\n        this.isPlaying = play\r\n\r\n        Theremin.masterVolume.gain.setValueAtTime(\r\n\r\n                play ? this.storedVolume : 0, \r\n                \r\n                Tone.context.currentTime\r\n            )\r\n    }\r\n\r\n\r\n\r\n    public serializeOut() : {} {\r\n\r\n        let _notes: {}[] = []\r\n \r\n        this.notes.forEach(note => {\r\n\r\n            _notes.push(note.serializeOut())\r\n        })\r\n\r\n        return {\r\n            notes: _notes,\r\n            masterVolume: Theremin.masterVolume.gain.value,\r\n            x: Theremin.x.name,\r\n            y: Theremin.y.name,\r\n            z: Theremin.z.name,\r\n        }\r\n    }\r\n\r\n    public serializeIn(obj: {}) {\r\n\r\n        if(obj['notes'] && obj['notes'].length > 0) {\r\n\r\n            for(let note of obj['notes']) {\r\n\r\n                let n = this.addNote()\r\n\r\n                n.serializeIn(note)\r\n\r\n                Theremin.computePosition(n)\r\n            }\r\n        }\r\n\r\n        if(obj['masterVolume']) \r\n            Theremin.masterVolume.gain.setValueAtTime(obj['masterVolume'], Tone.context.currentTime)\r\n\r\n        if(obj['x']) {\r\n\r\n        }\r\n        if(obj['y']) {\r\n\r\n        }\r\n        if(obj['z']) {\r\n\r\n        }\r\n    }\r\n}","import { Theremin } from './theremin';\r\nimport { Object3D, PlaneBufferGeometry, ShaderMaterial, MeshPhongMaterial, Mesh, CircleBufferGeometry, Vector3 } from 'three';\r\nimport { Note3D } from './note3D';\r\nimport { Note } from './note';\r\nimport { SceneManager } from '../scene-manager';\r\n\r\n\r\nexport class Theremin3D {\r\n\r\n    static instance: Theremin3D\r\n    public theremin: Theremin\r\n\r\n    public notes3D: Note3D[] = []\r\n    public objs: Object3D[] = []\r\n\r\n    public obj: Object3D\r\n\r\n    constructor(ctrl: Theremin) {\r\n\r\n        Theremin3D.instance = this\r\n\r\n        this.theremin = ctrl\r\n\r\n        this.obj = new Object3D()\r\n        this.obj.name = 'theremin.3D'\r\n\r\n\r\n        this.theremin.notes.forEach(note3D => {\r\n\r\n            this.addNote3D(note3D)\r\n        })\r\n    }\r\n\r\n\r\n    public update() {\r\n\r\n        for(let note3D of this.notes3D) { \r\n         \r\n            note3D.update()\r\n        }\r\n    }\r\n\r\n    public static moveNote(note3D: Note3D, position: Vector3) {\r\n\r\n        Theremin.computeFromPosition(note3D.ctrl, position)\r\n\r\n        note3D.update()\r\n    }\r\n\r\n\r\n    public getNoteByObj(obj: Object3D) : Note3D {\r\n       \r\n        for(let i = 0; i < this.notes3D.length; i++) {\r\n\r\n            if(this.notes3D[i].obj === obj) {\r\n\r\n                return this.notes3D[i]\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    public getNoteByID(id: number) : Note3D {\r\n       \r\n        for(let i = 0; i < this.notes3D.length; i++) {\r\n\r\n            if(this.notes3D[i].ctrl.id === id) {\r\n\r\n                return this.notes3D[i]\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    public addNote3D(note: Note) : Note3D {\r\n\r\n        let note3D = new Note3D(note)\r\n\r\n        this.notes3D.push(note3D)\r\n\r\n        this.objs.push(note3D.obj)\r\n\r\n        SceneManager.scene.add(note3D.obj)\r\n\r\n        return note3D\r\n    }\r\n\r\n    public removeNote3D(note3D: Note3D) : boolean {\r\n\r\n        if(!note3D) return false\r\n\r\n        let i = this.notes3D.indexOf(note3D)\r\n\r\n        if(i != -1) {\r\n\r\n            this.notes3D.splice(i, 1)\r\n            SceneManager.scene.remove(note3D.obj)\r\n            note3D.destroy()\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n    \r\n    // public groupNotesToChord(chord: Chord, _ses: Note3D[]) : Chord3D {\r\n\r\n    //     let chord3D = new Chord3D(chord, _ses)\r\n\r\n    //     this.notes3D.push(chord3D)\r\n\r\n    //     this.objs.push(chord3D.obj)\r\n\r\n    //     return chord3D\r\n    // }\r\n\r\n    // public ungroupNotes(_ses: Note3D[], chord: Chord3D) {\r\n\r\n    //     _ses.forEach(se => {\r\n\r\n    //         if(se instanceof Note3D) {\r\n\r\n    //             let note = (se as Note3D)\r\n\r\n    //             if((note.ctrl as Note).parent) {\r\n\r\n    //                 chord.removeNote(note)\r\n    //             }\r\n    //         }\r\n    //     })\r\n    // }\r\n\r\n    public reset() {\r\n\r\n        let note3Ds: Note3D[] = []\r\n        this.notes3D.forEach(note3D => { note3Ds.push(note3D)})\r\n        note3Ds.forEach(note3D => {\r\n            this.removeNote3D(note3D)\r\n        })\r\n    }\r\n}\r\n","\r\nexport class DragWindow {\r\n\r\n    private mouseDown: boolean = false\r\n\r\n    private window: HTMLElement\r\n\r\n    private xOffset: number\r\n    private yOffset: number\r\n\r\n    private top: number = 0\r\n    private left: number = 0\r\n\r\n    private dragbarClassName: string\r\n    private dragElementClassName: string\r\n\r\n    constructor(_dragbarClassName?: string, _dragElementClassName?: string) {\r\n\r\n        this.dragbarClassName = _dragbarClassName || 'drag-bar'\r\n        this.dragElementClassName = _dragElementClassName || 'drag-window'\r\n    }\r\n\r\n\r\n    public onMouseDown(e) {\r\n\r\n        this.mouseDown = true\r\n        \r\n        if(e.target.classList.contains(this.dragbarClassName)) {\r\n    \r\n          this.window = e.target.closest('.'+this.dragElementClassName)\r\n\r\n          let rect = this.window.getBoundingClientRect()\r\n\r\n          this.left = rect.left\r\n          this.top = rect.top\r\n            \r\n          this.xOffset = e.pageX - this.left \r\n          this.yOffset = e.pageY - this.top\r\n        }\r\n        else this.window = null\r\n      }\r\n    \r\n      public onMouseMove(e) {\r\n\r\n        // IF WINDOW IS TOO BIG TO BE DRAGED \r\n        // SHRINK DOWN AND CALC RECT OFFSET TO SET LEFT AND TOP\r\n        \r\n        if(this.mouseDown && this.window) {\r\n    \r\n            let window = this.window.closest('.'+this.dragElementClassName) as HTMLElement\r\n    \r\n            this.left = e.pageX - this.xOffset\r\n            this.top = e.pageY - this.yOffset\r\n    \r\n            window.style.position = 'absolute'\r\n    \r\n            window.style.left = this.left + 'px'\r\n            window.style.top = this.top + 'px'\r\n    \r\n            window.style.width = '300px'\r\n            window.style.height = 'auto'\r\n            window.style.overflow = 'hidden'\r\n        }\r\n      }\r\n      \r\n      public onMouseUp(e) {\r\n        \r\n        this.mouseDown = false\r\n    \r\n        this.window = null\r\n\r\n        this.top = 0\r\n        this.left = 0\r\n      }\r\n\r\n}","import { SceneManager } from '../../scene-manager';\r\n\r\nimport * as THREE from 'three'\r\nimport { Note3D } from 'src/app/theremin/note3D';\r\n\r\nexport class AxesLine {\r\n\r\n    public p1: THREE.Vector3\r\n    public p2: THREE.Vector3\r\n\r\n    public lineGeo: THREE.BufferGeometry\r\n    public obj: THREE.Line\r\n\r\n    public name: string\r\n\r\n    public color: number\r\n\r\n    constructor(color: number, name?:string) {\r\n        \r\n        this.name = name\r\n\r\n        this.color = color\r\n\r\n        this.p1 = new THREE.Vector3()\r\n        this.p2 = new THREE.Vector3()\r\n\r\n        this.lineGeo = new THREE.BufferGeometry()\r\n\r\n        this.obj = new THREE.Line(this.lineGeo, new THREE.LineBasicMaterial({ color: new THREE.Color(this.color) }))\r\n    }\r\n\r\n    public update() {\r\n\r\n        this.lineGeo.setFromPoints([this.p1, this.p2])\r\n    }\r\n}\r\n\r\nexport class AxesLabel {\r\n\r\n    \r\n    private note: Note3D\r\n\r\n    private start: THREE.Vector3\r\n    private end: THREE.Vector3\r\n\r\n    private x: AxesLine\r\n    private y: AxesLine\r\n    private z: AxesLine\r\n\r\n    public obj: THREE.Object3D\r\n\r\n    private _enabled: boolean = false\r\n\r\n\r\n    constructor(_note: Note3D) {\r\n\r\n        this.note = _note\r\n\r\n        this.start = new THREE.Vector3()\r\n        this.end = new THREE.Vector3()\r\n\r\n        this.createLabel()\r\n    }\r\n\r\n\r\n\r\n    public get enabled() { return this._enabled }\r\n    public set enabled(val: boolean) {\r\n\r\n        this._enabled = val\r\n\r\n        this.obj.visible = val\r\n        \r\n        this.update()\r\n    }\r\n\r\n    public reset() {\r\n\r\n        this.end.copy(this.note.ctrl.position)\r\n\r\n        this.update()\r\n    }\r\n\r\n\r\n\r\n    public update() {\r\n\r\n        if(!this._enabled) return\r\n\r\n        this.end.copy(this.note.ctrl.position)\r\n\r\n        this.x.p1.setX(this.start.x)\r\n        this.x.p1.setY(this.end.y)\r\n        this.x.p1.setZ(this.start.z)\r\n        this.x.p2.setX(this.end.x)\r\n        this.x.p2.setY(this.end.y)\r\n        this.x.p2.setZ(this.start.z)\r\n        this.x.update()\r\n        \r\n        this.y.p1.copy(this.start)\r\n        this.y.p2.setX(this.start.x)\r\n        this.y.p2.setY(this.end.y)\r\n        this.y.p2.setZ(this.start.z)\r\n        this.y.update()\r\n        \r\n        this.z.p1.setX(this.end.x)\r\n        this.z.p1.setY(this.end.y)\r\n        this.z.p1.setZ(this.start.z)\r\n        this.z.p2.setX(this.end.x)\r\n        this.z.p2.setY(this.end.y)\r\n        this.z.p2.setZ(this.end.z)\r\n        this.z.update()\r\n    }\r\n\r\n    private createLabel() {\r\n\r\n        this.obj = new THREE.Object3D()\r\n        this.obj.name = 'distancelabel.obj'\r\n        this.obj.visible = this._enabled\r\n\r\n        this.x = new AxesLine(this.note.ctrl.color.getHex(), 'x')\r\n        this.obj.add(this.x.obj)\r\n        \r\n        this.y = new AxesLine(this.note.ctrl.color.getHex(), 'y')\r\n        this.obj.add(this.y.obj)\r\n        \r\n        this.z = new AxesLine(this.note.ctrl.color.getHex(), 'z')\r\n        this.obj.add(this.z.obj)\r\n\r\n        SceneManager.scene.add(this.obj)\r\n    }\r\n}","import { SceneManager } from '../../scene-manager';\r\n\r\nimport * as THREE from 'three'\r\nimport { Color } from 'src/app/color';\r\nimport { Note3D } from 'src/app/theremin/note3D';\r\n\r\nexport class DistanceLabel {\r\n\r\n    private note: Note3D\r\n\r\n    private raycaster: THREE.Raycaster\r\n\r\n    private start: THREE.Vector3\r\n    private end: THREE.Vector3\r\n\r\n    public labels: DistanceLine[] = []\r\n\r\n    public obj: THREE.Object3D\r\n\r\n    private _enabled: boolean = false\r\n\r\n    private sides: string[] = ['top', 'bottom', 'left', 'right', 'front', 'back']\r\n    private pairs: string[][] = [\r\n        ['top', 'bottom'],\r\n        ['left', 'right'],\r\n        ['front', 'back'],\r\n    ]\r\n\r\n\r\n\r\n    constructor(_note: Note3D) {\r\n\r\n        this.note = _note\r\n\r\n        this.raycaster = new THREE.Raycaster()\r\n        this.raycaster.near = .001\r\n        this.raycaster.far = 1000\r\n\r\n        this.createLabel()\r\n    }\r\n\r\n\r\n\r\n    public get enabled() { return this._enabled }\r\n    public set enabled(val: boolean) {\r\n\r\n        this._enabled = val\r\n\r\n        this.obj.visible = val        \r\n    }\r\n\r\n\r\n\r\n    public update() {\r\n\r\n        if(!this._enabled) return\r\n\r\n        this.labels.forEach(label => {\r\n\r\n            label.update()\r\n        })\r\n    }\r\n\r\n    public showHideLabel(side: string, show: boolean) {\r\n\r\n        this.labels.forEach(label => {\r\n\r\n            if(label.side == side) {\r\n\r\n                if(show) label.show()\r\n                else label.hide()\r\n            }\r\n        })\r\n    }\r\n\r\n    private createLabel() {\r\n\r\n        this.obj = new THREE.Object3D()\r\n        this.obj.name = 'distancelabel.obj'\r\n        this.obj.visible = this._enabled\r\n\r\n        let label: DistanceLine\r\n        this.sides.forEach(side => {\r\n\r\n            label = new DistanceLine(side, this.note.ctrl.position)\r\n            this.labels.push(label)\r\n            this.obj.add(label.obj)\r\n        })\r\n\r\n        SceneManager.scene.add(this.obj)\r\n    }\r\n\r\n    public getLabelBySide(side: string) {\r\n\r\n        for(let i = 0; i < this.labels.length; i++) {\r\n\r\n            if(this.labels[i].side == side)\r\n                return this.labels[i]\r\n        }\r\n    }\r\n\r\n    public getOppositeLabel(label) {\r\n\r\n        let oLabel\r\n        let index:number\r\n\r\n        this.pairs.forEach( pair => {\r\n\r\n            index = pair.indexOf(label.side)\r\n            if(index != -1) oLabel = pair[index]\r\n        })\r\n\r\n        return this.getLabelBySide(oLabel)\r\n    }\r\n}\r\n\r\n\r\nclass DistanceLine {\r\n\r\n    public side: string\r\n\r\n    public obj: THREE.Object3D\r\n    public line: THREE.Object3D\r\n    private lineGeo: THREE.BufferGeometry\r\n    private points: THREE.Vector3[] = []\r\n\r\n    public start: THREE.Vector3\r\n    public end: THREE.Vector3\r\n\r\n    private raycaster: THREE.Raycaster\r\n    private intersects: THREE.Intersection[] \r\n    private distance: number\r\n\r\n    public color: THREE.Color\r\n\r\n    public enabled: boolean \r\n\r\n    public direction: THREE.Vector3\r\n\r\n\r\n    constructor(_side: string, _start: THREE.Vector3, _end?: THREE.Vector3) {\r\n\r\n        this.side = _side\r\n\r\n        this.start = _start\r\n\r\n        this.end = _end\r\n        if(_end == undefined) this.end = new THREE.Vector3()\r\n\r\n        this.raycaster = new THREE.Raycaster()\r\n        this.raycaster.near = .001\r\n        this.raycaster.far = 1000\r\n\r\n        this.direction = new THREE.Vector3()\r\n\r\n        this.create()\r\n    }\r\n\r\n    private create() {\r\n\r\n        this.enabled = true\r\n\r\n        this.obj = new THREE.Object3D()\r\n        this.obj.name = 'label.obj'\r\n\r\n        this.lineGeo = new THREE.BufferGeometry()\r\n\r\n        this.line = new THREE.Line(this.lineGeo, new THREE.LineBasicMaterial({\r\n            color: Color.X,\r\n            transparent: true,\r\n            opacity: .4\r\n        }))\r\n        this.line.name = 'line.mesh'\r\n\r\n        this.obj.add(this.line)\r\n\r\n        this.computeDirection()\r\n    }\r\n\r\n    private raycastObjs(callback: Function) {\r\n\r\n        this.raycaster.set(this.start, this.direction)\r\n\r\n        this.intersects = this.raycaster.intersectObjects(SceneManager.environmentObjs, true)\r\n\r\n        if(this.intersects.length > 0) {\r\n\r\n            this.distance = this.intersects[0].distance\r\n\r\n            this.end.copy(this.intersects[0].point)\r\n\r\n            callback()\r\n        }\r\n        else this.intersects = null\r\n    }\r\n\r\n    private computeDirection() {\r\n\r\n        switch(this.side) {\r\n\r\n            case 'back':\r\n\r\n                return this.direction.set(0, 0, -1)\r\n\r\n            break\r\n\r\n            case 'right':\r\n\r\n                return this.direction.set(1, 0, 0)\r\n\r\n            break\r\n\r\n            case 'front': \r\n\r\n                return this.direction.set(0, 0, 1)\r\n            break\r\n\r\n            case 'left':\r\n\r\n                return this.direction.set(-1, 0, 0)\r\n            break\r\n            \r\n            case 'top': \r\n\r\n                return this.direction.set(0, 1, 0)\r\n            break\r\n\r\n            case 'bottom':\r\n\r\n                return this.direction.set(0, -1, 0)\r\n            break\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    public hide() {\r\n\r\n        this.enabled = false\r\n\r\n\r\n\r\n    }\r\n\r\n    public show() {\r\n\r\n        this.enabled = true\r\n    }\r\n\r\n    public update() { \r\n\r\n        this.raycastObjs(()=> {\r\n\r\n            this.updateLine([this.start, this.end])\r\n        })\r\n    }\r\n\r\n    public updateLine(points: THREE.Vector3[]) {\r\n\r\n        this.points = points\r\n\r\n        this.lineGeo.setFromPoints(this.points)\r\n    }\r\n}","import *  as THREE from 'three'\r\n\r\nimport { SceneManager } from '../../scene-manager'\r\nimport { Color } from 'src/app/color'\r\nimport { Note3D } from 'src/app/theremin/note3D'\r\n\r\n\r\nexport class MemoryLabel {\r\n\r\n    private note: Note3D\r\n\r\n    private storedStart: THREE.Vector3\r\n\r\n    private start: THREE.Vector3\r\n    private end: THREE.Vector3\r\n\r\n    public obj: THREE.Object3D\r\n\r\n\r\n    public line: THREE.Line\r\n    private lineGeo: THREE.BufferGeometry\r\n    public sphere: THREE.Mesh\r\n\r\n    private _enabled: boolean = false\r\n\r\n\r\n    constructor(note: Note3D) {\r\n\r\n        this.note = note\r\n\r\n        this.storedStart = new THREE.Vector3()\r\n        this.start = new THREE.Vector3()\r\n        this.end = new THREE.Vector3()\r\n\r\n        this.createLabel()\r\n    }\r\n\r\n\r\n\r\n    public get enabled() { return this._enabled }\r\n    public set enabled(val: boolean) {\r\n\r\n        this._enabled = val\r\n\r\n        this.obj.visible = val\r\n\r\n        if(val) {\r\n\r\n            this.start.copy(this.note.ctrl.position)\r\n            this.storedStart.copy(this.note.ctrl.position)\r\n        }\r\n\r\n        this.update()\r\n    }\r\n\r\n\r\n\r\n    public update() {\r\n\r\n        if(!this._enabled) return\r\n\r\n        this.sphere.position.copy(this.storedStart)\r\n\r\n        this.end.copy(this.note.ctrl.position)\r\n\r\n        this.lineGeo.setFromPoints([this.storedStart, this.end])\r\n    }\r\n\r\n    public showHideLabel(side: string, show: boolean) {\r\n\r\n    }\r\n\r\n    private createLabel() {\r\n\r\n        this.obj = new THREE.Object3D()\r\n        this.obj.name = 'memorylabel.obj'\r\n        this.obj.visible = this._enabled\r\n\r\n        this.lineGeo = new THREE.BufferGeometry()\r\n        this.line = new THREE.Line(this.lineGeo, new THREE.LineBasicMaterial({ color: Color.X, transparent: true, opacity: .2 })) \r\n        this.line.name = 'line.obj'\r\n\r\n        this.obj.add(this.line)\r\n\r\n        this.sphere = new THREE.Mesh(new THREE.SphereBufferGeometry(.1), new THREE.MeshBasicMaterial({ color: Color.X, transparent: true, opacity: .2 }))\r\n        this.sphere.name = 'sphere.obj'\r\n        this.sphere.position.copy(this.start)\r\n        \r\n        this.obj.add(this.sphere)\r\n\r\n        SceneManager.scene.add(this.obj)\r\n    }\r\n}","import { Object3D, Mesh, Group, Scene } from 'three'\r\n\r\nexport class Tools {\r\n\r\n    private static uid:number = 0\r\n    public static getUniqueID() {\r\n\r\n        Tools.uid += 1\r\n\r\n        return Tools.uid\r\n    }\r\n\r\n    public static spliceElementFromArray(element: any, array: any[]) {\r\n\r\n        let i = array.indexOf(element)\r\n\r\n        if(i >= 0 ) {\r\n\r\n            return array.splice(i, 1)\r\n        } \r\n\r\n        else return null\r\n    }\r\n\r\n    public static dispose(obj: any) {\r\n\r\n        obj.traverse(object => {\r\n            if (object !instanceof Object3D || object !instanceof Mesh || object !instanceof Group || object !instanceof Scene) return\r\n            \r\n            if(object.geometry) object.geometry.dispose()\r\n\r\n            if (object.material) {\r\n                if(object.material.length) {\r\n                    for (const material of object.material) cleanMaterial(material)\r\n                }\r\n                else cleanMaterial(object.material)\r\n            } else {\r\n                for (const material of object.material) cleanMaterial(material)\r\n            }\r\n        })\r\n\r\n        const cleanMaterial = material => {\r\n            material.dispose()\r\n\r\n            // dispose textures\r\n            for (const key of Object.keys(material)) {\r\n                const value = material[key]\r\n                if (value && typeof value === 'object' && 'minFilter' in value) {\r\n                    console.log('dispose texture!')\r\n                    value.dispose()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}